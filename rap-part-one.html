<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta charset="utf-8" content="text/html" http-equiv="Content-Type">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<title>Rap Skills Analysis: A Computational Approach part 1</title>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="origin" name="referrer"/>
<meta content="Pelican" name="generator"/>
<link href="" rel="canonical"/>
<!-- Feed -->
<link href="/theme/css/style.css" rel="stylesheet" type="text/css"/>
<!-- Code highlight color scheme -->
<link href="/theme/css/code_blocks/c3.css" rel="stylesheet"/>
<!-- CSS specified by the user -->
<link href="//home/ed/Documents/Code/PA2/attila/static/css/my_colors.css" rel="stylesheet" type="text/css">
<!-- Custom fonts -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,300" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
<link href="/rap-part-one.html" rel="canonical"/>
<meta content="The first entry in a series on some data analysis into rap lyrics." name="description"/>
<meta content="Edward Antonian" name="author"/>
<meta content="data science" name="tags"/>
<meta content="python" name="tags"/>
<meta content="natural language processing" name="tags"/>
<meta content="rap" name="tags"/>
<meta content="hip hop" name="tags"/>
<meta content="" property="og:locale">
<meta content="PA2" property="og:site_name">
<meta content="website" property="og:type">
<meta content="PA2" property="og:title">
<meta content="View the blog." property="og:description">
<meta content="" property="og:url">
<meta content="/static/images/contact-bg.jpg" property="og:image">
<meta content="https://facebook.com/myprofile" property="article:publisher"/>
<meta content="article" property="og:type"/>
<meta content="/author/edward-antonian.html" property="article:author"/>
<meta content="/rap-part-one.html" property="og:url"/>
<meta content="Rap Skills Analysis: A Computational Approach part 1" property="og:title"/>
<meta content="2017-10-10 00:00:00+01:00" property="article:published_time"/>
<meta content="The first entry in a series on some data analysis into rap lyrics." property="og:description"/>
<meta content="/static/images/contact-bg.jpg" property="og:image"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="@myprofile" name="twitter:site"/>
<meta content="Rap Skills Analysis: A Computational Approach part 1" name="twitter:title"/>
<meta content="/rap-part-one.html" name="twitter:url"/>
<meta content="/static/images/contact-bg.jpg" name="twitter:image:src"/>
<meta content="The first entry in a series on some data analysis into rap lyrics." name="twitter:description"/>
</meta></meta></meta></meta></meta></meta></meta></link></meta></head>
<!-- TODO : Body class -->
<body class="home-template">
<nav id="menu">
<a class="close-button">Close</a>
<div class="nav-wrapper">
<p class="nav-label">Menu</p>
<ul><li role="presentation"><a href="pages/about.html">About</a></li><li role="presentation"><a href="archives.html">Archive</a></li>
</ul>
</div>
</nav>
<!-- Progressbar -->
<div class="progress-container">
<span class="progress-bar"></span>
</div>
<!-- Page Header -->
<!-- Set your background image for this header on the line below. -->
<header class="has-cover" id="post-header">
<div class="inner">
<nav id="navigation">
<span class="nav-button" id="home-button">
<a class="home-button" href="index.html" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
</span>
<span class="nav-button" id="menu-button">
<a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
</span>
</nav>
<h1 class="post-title">Rap Skills Analysis: A Computational Approach part 1</h1>
<!-- TODO : Proper class for headline -->
<span class="post-meta">
<a href="/author/edward-antonian.html">Edward antonian</a>
            | <time datetime="Tue 10 October 2017">Tue 10 October 2017</time>
</span>
<!-- TODO : Modified check -->
<span class="post-meta"> | Updated on Mon 18 December 2017</span>
<div class="post-cover cover" style="background-image: url('static/images/contact-bg.jpg')">
</div>
</div></header>
<section id="wrapper">
<a class="hidden-close"></a>
<!-- Post content -->
<main class="content" role="main">
<article class="post">
<div class="inner">
<section class="post-content">
<h1>Rap Skills Analysis, a Computational Approach</h1>
<h2><em>Get Rich or Die Pying</em></h2>
<h2>Introduction</h2>
<p>I am a self-confessed rap fan. I say self-confessed because part of me dreads mentioning this fact to people. I’ve been through enough awkward half-laughs on first dates to understand one thing: as a young person from suburban Britain it’s difficult to tell people you’re in to hip hop without sounding like a tosser. Trying to follow up with “well actually I think hip hop is a really expressive art-form drawing on a long line of blues, soul and African oral tradition, giving a means for the disenfranchised to express frustration and drive political and social change” hardly helps your case.  </p>
<p>Nevertheless, in this post I want to try marry two seemingly disconnected worlds, that of hip hop and computer programming, in an attempt to gain some interesting data insights. The question I want to answer is this: what computational processes could you use to rank rappers’ ability? Of course, art is fundamentally subjective in nature so individuals are likely to disagree on what constitutes ‘ability’. Also, the complexities of language and sound and the impact that may or may not have on a listener is difficult the analyse computationally. </p>
<p>With these limitations in consideration, I chose two relatively simple data points to get a sense of a rap artist’s skill. These are:</p>
<ol>
<li>The number of unique words used in a block of 20,000 words taken from the rap artist’s lyrics</li>
<li>The density of rhyming sounds the rap artist uses in the same 20,000 words</li>
</ol>
<p>These both have the benefit of being quantifiable and directly comparable across artists. I will walk you through my process of extracting and displaying this data with the programming language python 3 and thus assume some knowledge of python syntax and functionality, as well as basic command line and system know-how. Despite this, I am an intermediate programmer myself so there will doubtlessly be many many areas for improvement and optimisation. All suggestions and comments in this regard would be greatly appreciated. </p>
<p>However, if, like most normal people, you neither know nor care about programming you can skip straight to the end where the results are displayed. </p>
<h2>Part 1: Finding lyrics</h2>
<h3>1.1 Creating a master list of rappers</h3>
<p>The first task in this process is to select the list of rappers you want to consider and download their lyrics en-mass. I wanted to have a fairly comprehensive list of well-known rappers without having to recall every one by name. So, the first place I looked was the Wikipedia page ‘List of hip hop musicians’[link]. This has a pretty exhaustive list of over 1000 rap artists with Wikipedia pages. The first function I wrote simply goes to this page, downloads this data and outputs a list of all the rap artists’ names using the requests and BeautifulSoup modules to parse the HTML webpage. (Note, all packages I use are either in-built to python can be added easily with a simple pip install).  </p>
<p>We start by obtaining the Wikipedia URL, using requests to grab the HTML, then using BeautifulSoup to create a BS object, using the key "a" to get the titles. If you're not familiar with BeautifulSoup don't worry - neither was I. It basically takes a lump of raw HTML data and converts it into a nice custom object that allows you to access things quickly within it. They have some nice docs online which I suggest you read if you are unsure. Next, we loop through the titles, extracting all the artist names and appending them to a list. The code I have was just a bit of trial and error. It's not the most pretty, but it gets the job done. Our function outputs a nice python list containing strings with all the artist names in. </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">master_list</span><span class="p">():</span>
    <span class="sd">''' Call this function to return a python list containing a large </span>
<span class="sd">        master list of rap artists names'''</span>

    <span class="n">wiki_url</span> <span class="o">=</span> <span class="s1">'https://en.wikipedia.org/wiki/List_of_hip_hop_musicians'</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">wiki_url</span><span class="p">)</span>
    <span class="n">html_bs</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span> 
    <span class="n">artists_raw</span> <span class="o">=</span> <span class="n">html_bs</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span>
    <span class="n">artists_started</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists_raw</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">artist</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s1">'100 Kila'</span><span class="p">:</span>    <span class="c1">#First rapper on the list</span>
                <span class="n">artists_started</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="n">artists_started</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">title</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">'Edit'</span> <span class="ow">and</span> <span class="n">title</span> <span class="o">!=</span> <span class="s1">'Enlarge'</span><span class="p">:</span>    <span class="c1">#Messy</span>
                    <span class="k">if</span> <span class="s1">'('</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
                        <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">[:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'('</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">artists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s1">'Zico'</span><span class="p">:</span>    <span class="c1">#This is the last rapper on the list</span>
                <span class="k">break</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">return</span> <span class="n">artists</span>
</pre></div>
<p>From this list, I chose a selection of rappers that I knew personally and thought were worth including. Please forgive me if I have omitted any big names! I did this manually, copying and pasting the master list, then removing rappers I didn't want to include. Laborious maybe, but I wanted to have control over each rapper in the list, making sure all my personal favourites made it on. This left the following</p>
<div class="highlight"><pre><span></span><span class="n">my_artist_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'2 Chainz'</span><span class="p">,</span><span class="s1">'21 Savage'</span><span class="p">,</span><span class="s1">'50 Cent'</span><span class="p">,</span><span class="s1">'Andre 3000'</span><span class="p">,</span><span class="s1">'Big Boi'</span><span class="p">,</span><span class="s1">'Ab-Soul'</span><span class="p">,</span><span class="s1">'Abstract Rude'</span><span class="p">,</span><span class="s1">'Ace Hood'</span><span class="p">,</span><span class="s1">'Action Bronson'</span><span class="p">,</span>
<span class="s1">'Aesop Rock'</span><span class="p">,</span><span class="s1">'Afrika Bambaataa'</span><span class="p">,</span><span class="s1">'Afroman'</span><span class="p">,</span><span class="s1">'Akala'</span><span class="p">,</span><span class="s1">'Akon'</span><span class="p">,</span><span class="s1">'Anderson .Paak'</span><span class="p">,</span><span class="s1">'Andre 3000'</span><span class="p">,</span><span class="s1">'Angel Haze'</span><span class="p">,</span><span class="s1">'A$AP Ferg'</span><span class="p">,</span><span class="s1">'A$AP Rocky'</span><span class="p">,</span>
<span class="s1">'Asher Roth'</span><span class="p">,</span><span class="s1">'Astronautalis'</span><span class="p">,</span><span class="s1">'Awol One'</span><span class="p">,</span><span class="s1">'Awkwafina'</span><span class="p">,</span><span class="s1">'Azealia Banks'</span><span class="p">,</span><span class="s1">'Big Daddy Kane'</span><span class="p">,</span><span class="s1">'B-Real'</span><span class="p">,</span><span class="s1">'B.o.B'</span><span class="p">,</span><span class="s1">'Benzino'</span><span class="p">,</span><span class="s1">'Beastie Boys'</span><span class="p">,</span>
<span class="s1">'Big Boi'</span><span class="p">,</span><span class="s1">'Big K.R.I.T.'</span><span class="p">,</span><span class="s1">'Big L'</span><span class="p">,</span><span class="s1">'Big Pun'</span><span class="p">,</span><span class="s1">'Big Scoob'</span><span class="p">,</span><span class="s1">'Big Sean'</span><span class="p">,</span><span class="s1">'Billy Woods'</span><span class="p">,</span><span class="s1">'Birdman'</span><span class="p">,</span><span class="s1">'Bishop Nehru'</span><span class="p">,</span><span class="s1">'Bizarre'</span><span class="p">,</span><span class="s1">'Bizzy Bone'</span><span class="p">,</span>
<span class="s1">'BJ the Chicago Kid'</span><span class="p">,</span><span class="s1">'Bobby Shmurda'</span><span class="p">,</span><span class="s1">'Bone Crusher'</span><span class="p">,</span><span class="s1">'Boosie Badazz'</span><span class="p">,</span><span class="s1">'Brotha Lynch Hung'</span><span class="p">,</span><span class="s1">'Brother Ali'</span><span class="p">,</span><span class="s1">'Bubba Sparxxx'</span><span class="p">,</span><span class="s1">'Bun B'</span><span class="p">,</span>
<span class="s1">'Busdriver'</span><span class="p">,</span><span class="s1">'Busta Rhymes'</span><span class="p">,</span><span class="s1">'Cage'</span><span class="p">,</span><span class="s1">'Canibus'</span><span class="p">,</span><span class="s1">'CeeLo Green'</span><span class="p">,</span><span class="s1">'Ceschi'</span><span class="p">,</span><span class="s1">'Chamillionaire'</span><span class="p">,</span><span class="s1">'Chance the Rapper'</span><span class="p">,</span><span class="s1">'Chiddy Bang'</span><span class="p">,</span><span class="s1">'Chief Keef'</span><span class="p">,</span>
<span class="s1">'Childish Gambino'</span><span class="p">,</span><span class="s1">'Chino XL'</span><span class="p">,</span><span class="s1">'Chris Brown'</span><span class="p">,</span><span class="s1">'Chris Webby'</span><span class="p">,</span><span class="s1">'Classified'</span><span class="p">,</span><span class="s1">'Common'</span><span class="p">,</span><span class="s1">'Coolio'</span><span class="p">,</span><span class="s1">'Count Bass D'</span><span class="p">,</span><span class="s1">'Crooked I'</span><span class="p">,</span><span class="s1">'D</span><span class="se">\'</span><span class="s1">Angelo'</span><span class="p">,</span>
<span class="s1">'Dan Bull'</span><span class="p">,</span><span class="s1">'Danny Brown'</span><span class="p">,</span><span class="s1">'Dappy'</span><span class="p">,</span><span class="s1">'Daveed Diggs'</span><span class="p">,</span><span class="s1">'Del the Funky Homosapien'</span><span class="p">,</span><span class="s1">'Denzel Curry'</span><span class="p">,</span><span class="s1">'Desiigner'</span><span class="p">,</span><span class="s1">'Devin the Dude'</span><span class="p">,</span><span class="s1">'Devlin'</span><span class="p">,</span>
<span class="s1">'Dizzee Rascal'</span><span class="p">,</span><span class="s1">'Dizzy Wright'</span><span class="p">,</span><span class="s1">'DMX'</span><span class="p">,</span><span class="s1">'Dr. Dre'</span><span class="p">,</span><span class="s1">'Drake'</span><span class="p">,</span><span class="s1">'E-40'</span><span class="p">,</span><span class="s1">'Earl Sweatshirt'</span><span class="p">,</span><span class="s1">'Eazy-E'</span><span class="p">,</span><span class="s1">'El-P'</span><span class="p">,</span><span class="s1">'Elephant Man'</span><span class="p">,</span><span class="s1">'Eminem'</span><span class="p">,</span><span class="s1">'Eve'</span><span class="p">,</span>
<span class="s1">'Eyedea'</span><span class="p">,</span><span class="s1">'Fetty Wap'</span><span class="p">,</span><span class="s1">'Flavor Flav'</span><span class="p">,</span><span class="s1">'Flo Rida'</span><span class="p">,</span><span class="s1">'Flying Lotus'</span><span class="p">,</span><span class="s1">'Fort Minor'</span><span class="p">,</span><span class="s1">'Foxy Brown'</span><span class="p">,</span><span class="s1">'Frank Ocean'</span><span class="p">,</span><span class="s1">'Freddie Gibbs'</span><span class="p">,</span>
<span class="s1">'French Montana'</span><span class="p">,</span><span class="s1">'Funkmaster Flex'</span><span class="p">,</span><span class="s1">'Future'</span><span class="p">,</span><span class="s1">'The Game'</span><span class="p">,</span><span class="s1">'Gangsta Boo'</span><span class="p">,</span><span class="s1">'Ghostface Killah'</span><span class="p">,</span><span class="s1">'Giggs'</span><span class="p">,</span><span class="s1">'Grandmaster Caz'</span><span class="p">,</span>
<span class="s1">'Grandmaster Flash'</span><span class="p">,</span><span class="s1">'Greydon Square'</span><span class="p">,</span><span class="s1">'Grieves'</span><span class="p">,</span><span class="s1">'Gucci Mane'</span><span class="p">,</span><span class="s1">'Gudda Gudda'</span><span class="p">,</span><span class="s1">'Guilty Simpson'</span><span class="p">,</span><span class="s1">'GZA'</span><span class="p">,</span><span class="s1">'Hemlock Ernst'</span><span class="p">,</span><span class="s1">'Heems'</span><span class="p">,</span>
<span class="s1">'Hodgy Beats'</span><span class="p">,</span><span class="s1">'Hopsin'</span><span class="p">,</span><span class="s1">'Ice Cube'</span><span class="p">,</span><span class="s1">'Ice-T'</span><span class="p">,</span><span class="s1">'Iggy Azalea'</span><span class="p">,</span><span class="s1">'Immortal Technique'</span><span class="p">,</span><span class="s1">'Isaiah Rashad'</span><span class="p">,</span><span class="s1">'J. Cole'</span><span class="p">,</span><span class="s1">'Ja Rule'</span><span class="p">,</span><span class="s1">'Jadakiss'</span><span class="p">,</span>
<span class="s1">'Jaden Smith'</span><span class="p">,</span><span class="s1">'Jam Master Jay'</span><span class="p">,</span><span class="s1">'Jam Baxter'</span><span class="p">,</span><span class="s1">'Jarren Benton'</span><span class="p">,</span><span class="s1">'Jay Electronica'</span><span class="p">,</span><span class="s1">'Jay Rock'</span><span class="p">,</span><span class="s1">'Jay Z'</span><span class="p">,</span><span class="s1">'Jean Grae'</span><span class="p">,</span><span class="s1">'Jeremiah Jae'</span><span class="p">,</span>
<span class="s1">'Jeremih'</span><span class="p">,</span><span class="s1">'Jme'</span><span class="p">,</span><span class="s1">'Joe Budden'</span><span class="p">,</span><span class="s1">'Joell Ortiz'</span><span class="p">,</span><span class="s1">'Joey Badass'</span><span class="p">,</span><span class="s1">'Juelz Santana'</span><span class="p">,</span><span class="s1">'Juicy J'</span><span class="p">,</span><span class="s1">'Lauryn Hill'</span><span class="p">,</span><span class="s1">'Kanye West'</span><span class="p">,</span><span class="s1">'Kendrick Lamar'</span><span class="p">,</span>
<span class="s1">'Kevin Gates'</span><span class="p">,</span><span class="s1">'Kid Cudi'</span><span class="p">,</span><span class="s1">'Kid Ink'</span><span class="p">,</span><span class="s1">'Kid Rock'</span><span class="p">,</span><span class="s1">'Killer Mike'</span><span class="p">,</span><span class="s1">'Kodak Black'</span><span class="p">,</span><span class="s1">'Victor Vazquez'</span><span class="p">,</span><span class="s1">'Kool G Rap'</span><span class="p">,</span><span class="s1">'Kool A.D.'</span><span class="p">,</span><span class="s1">'Kool Keith'</span><span class="p">,</span>
<span class="s1">'Krayzie Bone'</span><span class="p">,</span><span class="s1">'Krizz Kaliko'</span><span class="p">,</span><span class="s1">'KRS-One'</span><span class="p">,</span><span class="s1">'Lil</span><span class="se">\'</span><span class="s1"> Kim'</span><span class="p">,</span><span class="s1">'Lil Jon'</span><span class="p">,</span><span class="s1">'Lil Uzi Vert'</span><span class="p">,</span><span class="s1">'Lil Wayne'</span><span class="p">,</span><span class="s1">'Lil Yachty'</span><span class="p">,</span><span class="s1">'Little Simz'</span><span class="p">,</span><span class="s1">'LL Cool J'</span><span class="p">,</span>
<span class="s1">'Lloyd Banks'</span><span class="p">,</span><span class="s1">'Logic'</span><span class="p">,</span><span class="s1">'Louis Logic'</span><span class="p">,</span><span class="s1">'Lowkey'</span><span class="p">,</span><span class="s1">'Ludacris'</span><span class="p">,</span><span class="s1">'Lupe Fiasco'</span><span class="p">,</span><span class="s1">'M.I.A.'</span><span class="p">,</span><span class="s1">'Mac Lethal'</span><span class="p">,</span><span class="s1">'Mac Miller'</span><span class="p">,</span><span class="s1">'Machine Gun Kelly'</span><span class="p">,</span>
<span class="s1">'Macklemore'</span><span class="p">,</span><span class="s1">'Masta Ace'</span><span class="p">,</span><span class="s1">'Masta Killa'</span><span class="p">,</span><span class="s1">'Master P'</span><span class="p">,</span><span class="s1">'MC Ren'</span><span class="p">,</span><span class="s1">'Meek Mill'</span><span class="p">,</span><span class="s1">'Method Man'</span><span class="p">,</span><span class="s1">'MF Doom'</span><span class="p">,</span><span class="s1">'MF Grimm'</span><span class="p">,</span><span class="s1">'Mick Jenkins'</span><span class="p">,</span><span class="s1">'Milo'</span><span class="p">,</span>
<span class="s1">'Mims'</span><span class="p">,</span><span class="s1">'Missy Elliott'</span><span class="p">,</span><span class="s1">'Mos Def'</span><span class="p">,</span><span class="s1">'Mr. Muthafuckin</span><span class="se">\'</span><span class="s1"> eXquire'</span><span class="p">,</span><span class="s1">'Mr. Porter'</span><span class="p">,</span><span class="s1">'Murs'</span><span class="p">,</span><span class="s1">'Nas'</span><span class="p">,</span><span class="s1">'Nate Dogg'</span><span class="p">,</span><span class="s1">'Nelly'</span><span class="p">,</span><span class="s1">'Nicki Minaj'</span><span class="p">,</span>
<span class="s1">'Nitty Scott, MC'</span><span class="p">,</span><span class="s1">'Noname'</span><span class="p">,</span><span class="s1">'Nocando'</span><span class="p">,</span><span class="s1">'The Notorious B.I.G.'</span><span class="p">,</span><span class="s1">'Obie Trice'</span><span class="p">,</span><span class="s1">'Oddisee'</span><span class="p">,</span><span class="s1">'OG Maco'</span><span class="p">,</span><span class="s1">'Ol</span><span class="se">\'</span><span class="s1"> Dirty Bastard'</span><span class="p">,</span>
<span class="s1">'Open Mike Eagle'</span><span class="p">,</span><span class="s1">'Q-Tip'</span><span class="p">,</span><span class="s1">'Pharoahe Monch'</span><span class="p">,</span><span class="s1">'Pharrell Williams'</span><span class="p">,</span><span class="s1">'Phife Dawg'</span><span class="p">,</span><span class="s1">'Pimp C'</span><span class="p">,</span><span class="s1">'Pitbull'</span><span class="p">,</span><span class="s1">'P.O.S.'</span><span class="p">,</span><span class="s1">'Prince Paul'</span><span class="p">,</span>
<span class="s1">'Professor Green'</span><span class="p">,</span><span class="s1">'Proof'</span><span class="p">,</span><span class="s1">'Prozak'</span><span class="p">,</span><span class="s1">'Pusha T'</span><span class="p">,</span><span class="s1">'Quasimoto'</span><span class="p">,</span><span class="s1">'R. Kelly'</span><span class="p">,</span><span class="s1">'R.A. the Rugged Man'</span><span class="p">,</span><span class="s1">'Raekwon'</span><span class="p">,</span><span class="s1">'Rakim'</span><span class="p">,</span><span class="s1">'Ras Kass'</span><span class="p">,</span><span class="s1">'Redman'</span><span class="p">,</span>
<span class="s1">'Rich Homie Quan'</span><span class="p">,</span><span class="s1">'Rick Ross'</span><span class="p">,</span><span class="s1">'Riff Raff'</span><span class="p">,</span><span class="s1">'Rittz'</span><span class="p">,</span><span class="s1">'Roc Marciano'</span><span class="p">,</span><span class="s1">'Roots Manuva'</span><span class="p">,</span><span class="s1">'Royce da 5</span><span class="se">\'</span><span class="s1">9</span><span class="se">\"</span><span class="s1">'</span><span class="p">,</span><span class="s1">'RZA'</span><span class="p">,</span><span class="s1">'Snoop Dogg'</span><span class="p">,</span><span class="s1">'Sadistik'</span><span class="p">,</span>
<span class="s1">'Sage Francis'</span><span class="p">,</span><span class="s1">'Scarface'</span><span class="p">,</span><span class="s1">'Schoolboy Q'</span><span class="p">,</span><span class="s1">'Sean Paul'</span><span class="p">,</span><span class="s1">'Sean Price'</span><span class="p">,</span><span class="s1">'Sho Baraka'</span><span class="p">,</span><span class="s1">'Sir Mix-a-Lot'</span><span class="p">,</span><span class="s1">'Slick Rick'</span><span class="p">,</span><span class="s1">'Slug'</span><span class="p">,</span><span class="s1">'Snoop Dogg'</span><span class="p">,</span>
<span class="s1">'Snow Tha Product'</span><span class="p">,</span><span class="s1">'Soulja Boy'</span><span class="p">,</span><span class="s1">'SpaceGhostPurrp'</span><span class="p">,</span><span class="s1">'Sticky Fingaz'</span><span class="p">,</span><span class="s1">'Swizz Beatz'</span><span class="p">,</span><span class="s1">'SwizZz'</span><span class="p">,</span><span class="s1">'SZA'</span><span class="p">,</span><span class="s1">'T.I.'</span><span class="p">,</span><span class="s1">'T-Pain'</span><span class="p">,</span><span class="s1">'T.O.P'</span><span class="p">,</span>
<span class="s1">'Taio Cruz'</span><span class="p">,</span><span class="s1">'Talib Kweli'</span><span class="p">,</span><span class="s1">'Tech N9ne'</span><span class="p">,</span><span class="s1">'Timbaland'</span><span class="p">,</span><span class="s1">'Tinie Tempah'</span><span class="p">,</span><span class="s1">'Too Short'</span><span class="p">,</span><span class="s1">'Tory Lanez'</span><span class="p">,</span><span class="s1">'Travis Scott'</span><span class="p">,</span><span class="s1">'Traxamillion'</span><span class="p">,</span>
<span class="s1">'Trey Songz'</span><span class="p">,</span><span class="s1">'Trick-Trick'</span><span class="p">,</span><span class="s1">'Tupac Shakur'</span><span class="p">,</span><span class="s1">'Twista'</span><span class="p">,</span><span class="s1">'Twisted Insane'</span><span class="p">,</span><span class="s1">'Ty Dolla Sign'</span><span class="p">,</span><span class="s1">'Tyga'</span><span class="p">,</span><span class="s1">'Tyler, The Creator'</span><span class="p">,</span><span class="s1">'U-God'</span><span class="p">,</span>
<span class="s1">'Vast Aire'</span><span class="p">,</span><span class="s1">'Vic Mensa'</span><span class="p">,</span><span class="s1">'Vince Staples'</span><span class="p">,</span><span class="s1">'Violent J'</span><span class="p">,</span><span class="s1">'Xzibit'</span><span class="p">,</span><span class="s1">'Waka Flocka Flame'</span><span class="p">,</span><span class="s1">'Wale'</span><span class="p">,</span><span class="s1">'Watsky'</span><span class="p">,</span><span class="s1">'Will Smith'</span><span class="p">,</span><span class="s1">'Will.i.am'</span><span class="p">,</span>
<span class="s1">'Wiz Khalifa'</span><span class="p">,</span><span class="s1">'Wrekonize'</span><span class="p">,</span><span class="s1">'XXXTENTACION'</span><span class="p">,</span><span class="s1">'Young Jeezy'</span><span class="p">,</span><span class="s1">'Yelawolf'</span><span class="p">,</span><span class="s1">'Young Buck'</span><span class="p">,</span><span class="s1">'Young Thug'</span><span class="p">,</span><span class="s1">'Your Old Droog'</span><span class="p">,</span><span class="s1">'Yukmouth'</span><span class="p">,</span>
<span class="s1">'Yung Lean'</span><span class="p">,</span><span class="s1">'Zebra Katz'</span><span class="p">]</span>
</pre></div>
<h3>1.2 Accessing lyrics</h3>
<p>Now comes the slightly more complex task of downloading lyrics for every artist listed. To do this we're going to use the website Genius.com, by far the largest lyric database online. They actually have an API which you can use, however it looked like it was more trouble than it was worth and I couldn't get hold of a developer's authentication token. The benefit of Genius is that it is very extensive and fairly standardised. The draw back is it's a flashy website with a lot of javascript increasing load times and making it a little difficult to navigate in python. It is a bit slow, but using just requests and BeautifulSoup it's possible to access each artist's page and download their lyrics. </p>
<p>The first step then is to find the correct URL for each artist. With genius, this is relatively simple since the artist page URL tends to follow a very simple formula: https://genius.com/artists/Artist-name where the first letter of the artist's name is always capitalised and the rest is lower-case, multiple words are joined with a hyphen, and any apostrophes and full stops are removed. Examples would be:</p>
<ul>
<li>https://genius.com/artists/Meek-mill</li>
<li>https://genius.com/artists/Method-man</li>
<li>https://genius.com/artists/Mf-doom</li>
</ul>
<p>Our first function therefore converts the names as written in the above list into the correct artist URLs on Genius. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">name_to_url</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">'''Take an artists name and output the link to their genius page'''</span>

    <span class="n">base_url</span> <span class="o">=</span> <span class="s1">'https://genius.com/artists/'</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'.'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>    <span class="c1">#remove apostrophes and full stops</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'</span><span class="se">\'</span><span class="s1">'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="n">split_name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">name_new</span> <span class="o">=</span> <span class="n">split_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">name_new</span> <span class="o">=</span> <span class="n">name_new</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">name_new</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>    <span class="c1">#ensure first letter of first word is capitalised</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">split_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">name_new</span><span class="o">=</span> <span class="n">name_new</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>    <span class="c1">#add words together with hyphen</span>

    <span class="k">return</span> <span class="n">base_url</span><span class="o">+</span><span class="n">name_new</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="k">print</span><span class="p">(</span><span class="n">name_to_url</span><span class="p">(</span><span class="n">name</span><span class="p">))</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'KRS-One'</span><span class="p">,</span><span class="s1">'LL Cool J'</span><span class="p">,</span><span class="s1">'MF Doom'</span><span class="p">]</span> <span class="p">]</span> 
</pre></div>
<div class="highlight"><pre><span></span>https://genius.com/artists/Krs-one
https://genius.com/artists/Ll-cool-j
https://genius.com/artists/Mf-doom
</pre></div>
<p>I found the best way to access individual songs from here was through the albums linked from this page. This is because unfortunately, without messing around with the javascript, you only have access to a few songs directly from this page, whereas you can directly access six albums, where you can link directly to all the songs. So my next step was to find links to all albums possible. </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">get_albums</span><span class="p">(</span><span class="n">artist_url</span><span class="p">):</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">artist_url</span><span class="p">)</span>
    <span class="n">html_bs</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
    <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">html_bs</span><span class="p">(</span><span class="s1">'script'</span><span class="p">)]</span>
    <span class="n">top_albums</span> <span class="o">=</span> <span class="n">html_bs</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">"vertical_album_card"</span><span class="p">)</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">album</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">for</span> <span class="n">album</span> <span class="ow">in</span> <span class="n">top_albums</span><span class="p">]</span>   
    <span class="k">return</span> <span class="n">urls</span>

<span class="c1"># Test: Find the links to the 6 most recent MF Doom albums on Genius </span>
<span class="n">MF_Doom_albums</span> <span class="o">=</span> <span class="n">get_albums</span><span class="p">(</span><span class="n">name_to_url</span><span class="p">(</span><span class="s1">'MF Doom'</span><span class="p">))</span>
<span class="k">for</span> <span class="n">album_link</span> <span class="ow">in</span> <span class="n">MF_Doom_albums</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">album_link</span><span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span>https://genius.com/albums/Mf-doom/Born-like-this
https://genius.com/albums/Mf-doom/Metalfingers-presents-special-herbs-the-box-set-vol-0-9-disc-2
https://genius.com/albums/Mf-doom/Metal-fingers-presents-special-herbs-the-box-set-vol-0-9-disc-1
https://genius.com/albums/Mf-doom/Mm-food
https://genius.com/albums/Mf-doom/Special-blends-volume-1-2
https://genius.com/albums/Mf-doom/Dead-bent-doomsday
</pre></div>
<p>Next, given an album url we want to extract the urls and titles of all the songs on that album</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_songs</span><span class="p">(</span><span class="n">album_url</span><span class="p">):</span>
    <span class="sd">'''Take an album URL link and find all the song titles and their related URLs'''</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">album_url</span><span class="p">)</span>
    <span class="n">html_bs</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
    <span class="n">songs</span> <span class="o">=</span> <span class="n">html_bs</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"a"</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">"u-display_block"</span><span class="p">)</span>
    <span class="n">song_urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">song</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">songs</span><span class="p">]</span>  <span class="c1">#href to song</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">html_bs</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">"h3"</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">"chart_row-content-title"</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">song_urls</span><span class="p">,</span> <span class="n">titles</span>

<span class="c1"># Test: Print all the titles and URLs for the most recent MF Doom album on Genius</span>
<span class="n">doom_urls</span><span class="p">,</span> <span class="n">doom_titles</span> <span class="o">=</span> <span class="n">get_songs</span><span class="p">(</span><span class="n">MF_Doom_albums</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">for</span> <span class="n">url</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">doom_urls</span><span class="p">,</span> <span class="n">doom_titles</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">[:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'Lyrics'</span><span class="p">)])</span>
</pre></div>
<div class="highlight"><pre><span></span>https://genius.com/Mf-doom-beef-rapp-lyrics 
              Beef Rapp

https://genius.com/Mf-doom-hoe-cakes-lyrics 
              Hoe Cakes

https://genius.com/Mf-doom-potholderz-lyrics 
              Potholderz (Ft. Count Bass D)

https://genius.com/Mf-doom-one-beer-lyrics 
              One Beer

https://genius.com/Mf-doom-deep-fried-frenz-lyrics 
              Deep Fried Frenz

https://genius.com/Mf-doom-poo-putt-platter-lyrics 
              Poo Putt Platter

https://genius.com/Mf-doom-fillet-o-rapper-lyrics 
              Fillet-O-Rapper

https://genius.com/Mf-doom-gumbo-lyrics 
              Gumbo

https://genius.com/Mf-doom-fig-leaf-bi-carbonate-lyrics 
              Fig Leaf Bi-Carbonate

https://genius.com/Mf-doom-kon-karne-lyrics 
              Kon Karne

https://genius.com/Mf-doom-guinnesses-lyrics 
              Guinnesses (Ft. 4ize &amp;amp; Stahhr)

https://genius.com/Mf-doom-kon-queso-lyrics 
              Kon Queso

https://genius.com/Mf-doom-rapp-snitch-knishes-lyrics 
              Rapp Snitch Knishes (Ft. Mr. Fantastik)

https://genius.com/Mf-doom-vomitspit-lyrics 
              Vomitspit

https://genius.com/Mf-doom-kookies-lyrics 
              Kookies

https://genius.com/Mf-doom-mm-food-tracklist-album-artwork-annotated 
              MM.. FOOD [Tracklist + Album Artwork]
</pre></div>
<p>The next step is to get the raw text of the lyrics for each song. One thing to note here is that you must be running python3 for the following to work as expected. This is because of python3's handling of unicode strings. It's possible to do in python2 but you will have to play around with converting the text from unicode to ASCII.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_lyrics</span><span class="p">(</span><span class="n">song_url</span><span class="p">):</span>
    <span class="sd">'''take a song url and gather the raw text containg the lyrics for that song'''</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">song_url</span><span class="p">)</span>
    <span class="n">html_bs</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">"html.parser"</span><span class="p">)</span>
    <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">html_bs</span><span class="p">(</span><span class="s1">'script'</span><span class="p">)]</span>
    <span class="n">lyrics</span> <span class="o">=</span> <span class="n">html_bs</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"div"</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">"lyrics"</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> 
    <span class="k">return</span> <span class="n">lyrics</span>

<span class="c1"># Test: Find the lyrics to the first track on the latest Doom album on Genius</span>
<span class="n">doom_lyrics</span> <span class="o">=</span> <span class="n">get_lyrics</span><span class="p">(</span><span class="n">doom_urls</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">doom_lyrics</span><span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">[Intro: MF DOOM &amp;amp; (Mr. Fantastik)]</span>
<span class="na">(Yo!) Yo!</span>
<span class="na">(MF DOOM) Mr. Fantastik</span>
<span class="na">(Mr. Fantastik) Villain</span>
<span class="na">(What up, nigga?) Ain't nuttin; what's the word?</span>
<span class="na">(What's cracking, boy?) Same ol' shit, kid...</span>
<span class="na">(Man) ...different day, you know?</span>
<span class="na">(These rap snitches, man...</span>
<span class="na">Shit is bugged out, man. What the fuck, man?)</span>
<span class="na">Shit, you telling me. (Niggas running their mouth</span>
<span class="na">Telling e'rything, e'rything)</span>

<span class="k">[Hook 2X: Mr. Fantastik ]</span>
<span class="na">Rap snitches, telling all their business</span>
<span class="na">Sit in the court and be their own star witness</span>
<span class="na">Do you see the perpetrator? - Yeah, I'm right here</span>
<span class="na">Fuck around, get the whole label sent up for years</span>

<span class="k">[Verse 1: Mr. Fantastik]</span>
<span class="na">Type profile low, like A in Paid in Full</span>
<span class="na">Attract heavy cash 'cause the game's centrifugal</span>
<span class="na">Mister Fantastik, long dough like elastic</span>
<span class="na">Guard my life with twin Glocks that's made out of plastic</span>
<span class="na">Can't stand a brown nosing nigga fake ass bastard</span>
<span class="na">Admiring my style, tour bus through Manhattan</span>
<span class="na">Plotting, plan the quickest, my flow's the sickest</span>
<span class="na">My hoes be the thickest, my dro the stickiest</span>
<span class="na">Street nigga, stamped and bonafide</span>
<span class="na">When beef jump niggas come get me 'cause they know I ride</span>
<span class="na">True to the ski mask, New York's my origin</span>
<span class="na">Play a fake gangsta like a old accordion</span>
<span class="na">According to him, when the D's rushed in</span>
<span class="na">Complication from the wire testimony was thin</span>
<span class="na">Caused his man to go up north, the ball hit 'em again</span>
<span class="na">Lame rap snitch nigga even told on the Mexican</span>

<span class="k">[Hook 2X: Mr. Fantastik]</span>
<span class="na">Rap snitches, telling all their business</span>
<span class="na">Sit in the court and be their own star witness</span>
<span class="na">Do you see the perpetrator? - Yeah, I'm right here</span>
<span class="na">Fuck around, get the whole label sent up for years</span>

<span class="k">[Verse 2: MF DOOM]</span>
<span class="na">True, there's rules to this shit, fools dare care</span>
<span class="na">Everybody wanna rule the world with tears for fear</span>
<span class="na">Yeah, yeah, tell 'em tell it on the mountain hill</span>
<span class="na">Running up they mouth bill, everybody doubting still</span>
<span class="na">Informer, keep it up and get tested</span>
<span class="na">Pop through your bubble vest or double-breasted</span>
<span class="na">He keep a lab down south in the little beast</span>
<span class="na">So much heat you woulda thought it was the Middle East</span>
<span class="na">A little grease always keeps the wheels a spinning</span>
<span class="na">Like sitting on twenty threes to get the squealers grinning</span>
<span class="na">Hitting on many trees, feel real linen</span>
<span class="na">Spitting on enemies, get the steel for tin men</span>
<span class="na">Where no brains but gum flap</span>
<span class="na">He said his gun clap, then he fled after one slap (Pap!)</span>
<span class="na">Son, shut your trap, save it for the bitches</span>
<span class="na">Mmm, delicious, rapp snitch knishes</span>

<span class="k">[Outro: Mr. Fantastik &amp;amp; (MF DOOM)]</span>
<span class="na">You know what I'm saying?</span>
<span class="na">(It's terrible)</span>
<span class="na">Crazy, man, I'm just analyzing this whole game</span>
<span class="na">This is bugged out, man, niggas is snitching</span>
<span class="na">Telling on they own self</span>
<span class="na">(It's a horror, yo)</span>
<span class="na">Fuck around and get everybody bagged, man</span>
<span class="na">(Atrocities)</span>
<span class="na">Fuck around and get yo mama bagged, nigga</span>
<span class="na">You know your grandmama used to be bootlegging...</span>
<span class="na">Fake hustling nigga</span>

<span class="na">Perpetrator? Yeah, I'm right here...</span>
</pre></div>
<h2>1.3 Cleaning Lyrics</h2>
<p>The next step is to clean up these raw lyrics, and unfortunately by clean I don't mean remove the expletives (sorry mum).</p>
<p>One thing you might notice from the above example is that there are a number of songs on the album that have other artists featuring on. This is problematic as we want to analyse the lyrics of a single artist. One simple solution would be to simply discard any song that has another artist featuring on it. However this seems unnecessarily wasteful and for artists that typically have a lot of other people featuring on the album, it may prevent the artist from reaching the 20,000 word threshold. </p>
<p>Luckily, genius neatly formats featured verses in its lyrics in the following way; a verse by a featuring artist almost always has the name in square brackets like so [featuring artist]. This means, if we are expecting a featuring artist, we can write code to eliminate their verse from the song. The problem is this: the guest rapper may have one or more verses starting with [Artist Name] and ending with a double new line character. We want to return the lyrics text with these sections removed. </p>
<p>My function identifies each verse, determines whether the featuring artist's name is in the first section of each verse, and removes each verse identified as not the main artist's. This is by no means perfect. Although genius is relatively standardised, there will be exceptions, and bits of lyrical content not belonging to the main artist may sneak through. However, the simple rule in general gives relatively good results. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">remove_guest_verse</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">lyrics</span> <span class="o">+=</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span>
    <span class="n">verses_listed</span> <span class="o">=</span> <span class="n">lyrics</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">new_verses</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">verse</span> <span class="ow">in</span> <span class="n">verses_listed</span><span class="p">:</span>
        <span class="n">verse_start</span> <span class="o">=</span> <span class="n">verse</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">50</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="ow">in</span> <span class="n">verse_start</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_verses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">verse</span><span class="p">)</span>
    <span class="n">lyrics</span> <span class="o">=</span> <span class="s1">''</span>
    <span class="k">for</span> <span class="n">verse</span> <span class="ow">in</span> <span class="n">new_verses</span><span class="p">:</span>
        <span class="n">lyrics</span> <span class="o">+=</span> <span class="n">verse</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span>
    <span class="k">return</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>

<span class="n">song_doom_only</span> <span class="o">=</span> <span class="n">remove_guest_verse</span><span class="p">(</span><span class="n">doom_lyrics</span><span class="p">,</span> <span class="s1">'Mr. Fantastik'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">song_doom_only</span><span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="k">[Verse 2: MF DOOM]</span>
<span class="na">True, there's rules to this shit, fools dare care</span>
<span class="na">Everybody wanna rule the world with tears for fear</span>
<span class="na">Yeah, yeah, tell 'em tell it on the mountain hill</span>
<span class="na">Running up they mouth bill, everybody doubting still</span>
<span class="na">Informer, keep it up and get tested</span>
<span class="na">Pop through your bubble vest or double-breasted</span>
<span class="na">He keep a lab down south in the little beast</span>
<span class="na">So much heat you woulda thought it was the Middle East</span>
<span class="na">A little grease always keeps the wheels a spinning</span>
<span class="na">Like sitting on twenty threes to get the squealers grinning</span>
<span class="na">Hitting on many trees, feel real linen</span>
<span class="na">Spitting on enemies, get the steel for tin men</span>
<span class="na">Where no brains but gum flap</span>
<span class="na">He said his gun clap, then he fled after one slap (Pap!)</span>
<span class="na">Son, shut your trap, save it for the bitches</span>
<span class="na">Mmm, delicious, rapp snitch knishes</span>

<span class="na">Perpetrator? Yeah, I'm right here...</span>
</pre></div>
<p>The last two helper functions we will write before creating the main function to put this all together. The first is a cleaner function. It removes all lines starting with useless words like [chorus] and all repeated lines. Then, a small (perhaps unnecessary, but I like it) function to save our lyrics to a .txt file. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="n">lyrics</span><span class="p">):</span>
    <span class="n">line_list</span> <span class="o">=</span> <span class="n">lyrics</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">line_list</span> <span class="k">if</span> <span class="p">((</span><span class="s1">'['</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">'('</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span> <span class="n">line_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line_list</span><span class="p">)</span>

<span class="n">cleaned</span> <span class="o">=</span> <span class="n">clean</span><span class="p">(</span><span class="n">song_doom_only</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cleaned</span><span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span>True, there's rules to this shit, fools dare care
Everybody wanna rule the world with tears for fear
Yeah, yeah, tell 'em tell it on the mountain hill
Running up they mouth bill, everybody doubting still
Informer, keep it up and get tested
Pop through your bubble vest or double-breasted
He keep a lab down south in the little beast
So much heat you woulda thought it was the Middle East
A little grease always keeps the wheels a spinning
Like sitting on twenty threes to get the squealers grinning
Hitting on many trees, feel real linen
Spitting on enemies, get the steel for tin men
Where no brains but gum flap
He said his gun clap, then he fled after one slap (Pap!)
Son, shut your trap, save it for the bitches
Mmm, delicious, rapp snitch knishes
Perpetrator? Yeah, I'm right here...
</pre></div>
<p>If you're running this as a script on windows I recommend creating un-commenting the two top lines, creating a folder called text and using that structure to save all .txt files to that folder. </p>
<div class="highlight"><pre><span></span><span class="c1"># import os</span>
<span class="c1"># path = os.path.dirname(os.path.realpath(__file__)).replace('\\', '/')+'/text/'</span>

<span class="k">def</span> <span class="nf">lyrics_to_txt</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">thefile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="n">artist</span><span class="o">+</span><span class="s1">'.txt'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
    <span class="n">thefile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'</span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">lyrics</span><span class="p">)</span>
</pre></div>
<p>The following code puts all previous functions together into one coherent subroutine. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">save_lyrics</span><span class="p">(</span><span class="n">artist</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">name_to_url</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">album_urls</span> <span class="o">=</span>  <span class="n">get_albums</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">word_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">all_lyrics</span> <span class="o">=</span> <span class="s1">''</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">album_urls</span><span class="p">)</span><span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="c1">#for each album</span>
        <span class="k">for</span> <span class="n">album_url</span> <span class="ow">in</span> <span class="n">album_urls</span><span class="p">:</span>
            <span class="n">song_urls</span><span class="p">,</span> <span class="n">song_titles</span> <span class="o">=</span> <span class="n">get_songs</span><span class="p">(</span><span class="n">album_url</span><span class="p">)</span>

            <span class="c1">#for each song</span>
            <span class="k">for</span> <span class="n">song_url</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">song_urls</span><span class="p">,</span> <span class="n">song_titles</span><span class="p">):</span>
                <span class="n">feat</span><span class="o">=</span><span class="p">[]</span>
                <span class="c1">#find featuring artists</span>
                <span class="k">if</span> <span class="s1">'Ft'</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
                    <span class="n">feat</span> <span class="o">=</span> <span class="n">title</span><span class="p">[</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">'('</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span><span class="p">:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">')'</span><span class="p">)]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">', '</span><span class="p">,</span> <span class="s1">' &amp; '</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' &amp; '</span><span class="p">)</span>

                <span class="c1">#get lyrics</span>
                <span class="n">lyrics</span> <span class="o">=</span> <span class="n">get_lyrics</span><span class="p">(</span><span class="n">song_url</span><span class="p">)</span>

                <span class="c1">#remove guest verses and clean up</span>
                <span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">feat</span><span class="p">:</span>
                    <span class="n">lyrics</span> <span class="o">=</span> <span class="n">remove_guest_verse</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">guest</span><span class="p">)</span>
                <span class="n">lyrics</span> <span class="o">=</span> <span class="n">clean</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>

                <span class="n">all_lyrics</span> <span class="o">=</span> <span class="n">all_lyrics</span> <span class="o">+</span> <span class="n">lyrics</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span>

                <span class="c1">#check the word count</span>
                <span class="n">word_count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lyrics</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">,</span> <span class="s1">' '</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">' '</span><span class="p">))</span> 
                <span class="k">if</span> <span class="n">word_count</span><span class="o">&gt;=</span> <span class="mi">20000</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">' complete'</span><span class="p">)</span>

                    <span class="k">print</span><span class="p">(</span><span class="n">all_lyrics</span><span class="p">,</span> <span class="n">artist</span><span class="p">)</span>
                    <span class="k">return</span> 

        <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">' Couldn</span><span class="se">\'</span><span class="s1">t get to 20,000 words'</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">album_urls</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">' Problem loading page'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">' Not enough albums'</span><span class="p">)</span>

<span class="c1">#save_lyrics('2 Chainz')</span>
</pre></div>
<p>I've added in some debugging print lines so help identify the source of the problem if the download fails. This may be because the code failed to find the artist's page (for example, Tupac Shakur fails since the Genius page has the artist written as 2Pac). There are a number of artists that fail to meet the 20,000 word threshold. Sometimes, this is because there really aren't enough words in their entire discography. Other times it's because the six listed albums don't have enough words. In this case, the only way you can solve the problem is by manually adding more lyrics. </p>
<p>Hooray! We finally have a complete function for gathering lyrics. Part one complete. Now for the fun stuff: lyric analysis. </p>
</section>
<section class="post-info">
<div class="post-share">
<a class="twitter" href="https://twitter.com/share?text=Rap Skills Analysis: A Computational Approach part 1&amp;url=/rap-part-one.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
<i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
</a>
<a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/rap-part-one.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
<i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
</a>
<a class="googleplus" href="https://plus.google.com/share?url=/rap-part-one.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
<i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
</a>
<div class="clear"></div>
</div>
<aside class="post-tags">
<a href="/tag/data-science.html">data science</a><a href="/tag/python.html">python</a><a href="/tag/natural-language-processing.html">natural language processing</a><a href="/tag/rap.html">rap</a><a href="/tag/hip-hop.html">hip hop</a> </aside>
<div class="clear"></div>
</section>
<aside class="post-nav">
<div class="clear"></div>
</aside>
</div>
</article>
</main>
<!-- TODO : Body class -->
<div class="" id="body-class" style="display: none;"></div>
<footer id="footer">
<div class="inner">
<section class="credits">
<span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
<span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
</section>
</div>
</footer>
</section>
<script src="/theme/js/script.js" type="text/javascript"></script>
</body>
</html>