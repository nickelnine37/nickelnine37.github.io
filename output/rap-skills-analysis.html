<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Rap Skills Analysis: A Computational Approach Get Rich or Die Pying 1 . Introduction I am a self-confessed rap fan. I say self-confessed because part of me dreads mentioning this fact to people....">
        <meta name="keywords" content="">
        <link rel="icon" href="/favicon.ico">

        <title>Rap Skills Analysis - A Pelican Blog</title>

        <!-- Stylesheets -->
        <link href="/theme/css/all.min.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Full Atom Feed" />
        <link href="/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Categories Atom Feed" />
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->



    </head>

    <body>

        <!-- Header -->
    <div class="header-container" style="background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url('/images/rap.jpg'); background-position: center; background-size: cover;">

            <!-- Static navbar -->
            <div class="container">
                <div class="header-nav">
                    <div class="header-logo">
                        <a class="pull-left" href="/"><img class="mr20" src="/logo.svg" alt="logo">A Pelican Blog</a>
                    </div>
                    <div class="nav pull-right">
                                <a href="/">Homepage</a>
                    </div>
                </div>
            </div>
            <!-- /Static navbar -->

            <!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">Rap Skills Analysis</h1>
                      <p class="header-date">By <a href="/author/edward-antonian.html">Edward Antonian</a>, Tue 10 October 2017, in category <a href="/category/misc.html">Misc</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
            <!-- /Header -->

        </div>
        <!-- /Header -->


        <!-- Content -->
    <div class="container content">
        <h1>Rap Skills Analysis: A Computational Approach</h1>
<h2><em>Get Rich or Die Pying</em></h2>
<h2>1 . Introduction</h2>
<p>I am a self-confessed rap fan. I say self-confessed because part of me dreads mentioning this fact to people. I’ve been through enough awkward half-laughs on first dates to understand one thing: as a young person from suburban Britain it’s difficult to tell people you’re in to hip hop without sounding like a tosser. Trying to follow up with “well actually I think hip hop is really an art form of raw self-expression drawing on a long line of blues, soul and African oral tradition, giving a means for the disenfranchised to express frustration and drive political and social change” hardly helps your case.  </p>
<p>Nevertheless, in this post I want to try marry two seemingly disconnected worlds, that of hip hop and computer programming, in an attempt to gain some interesting data insights. The question I want to answer is this: what computational processes could you use to rank rappers’ ability? Of course, art is fundamentally subjective in nature so individuals are likely to disagree on what constitutes ‘ability’. Also, the complexities of language and sound and the impact that may or may not have on a listener is difficult the analyse computationally. </p>
<p>With these limitations in consideration, I chose two relatively simple data points to get a sense of a rap artist’s skill. These are:</p>
<ol>
<li>The number of unique words used in a block of 20,000 words taken from the rap artist’s lyrics</li>
<li>The density of rhyming sounds the rap artist uses in the same 20,000 words</li>
</ol>
<p>These both have the benefit of being quantifiable and directly comparable across artists. I will walk you through my process of extracting and displaying this data with the programming language python 3 and thus assume some knowledge of python syntax and functionality, as well as basic command line and system know-how. Despite this, I am a relatively novice programmer myself so there will doubtlessly be many many areas for improvement and optimisation. All suggestions and comments in this regard would be greatly appreciated. </p>
<p>However, if, like most normal people, you neither know nor care about programming you can skip straight to the end where the results are displayed. </p>
<h2>2. Finding lyrics</h2>
<h3>2.1 Creating a master list of rappers</h3>
<p>The first task in this process is to select the list of rappers you want to consider and download their lyrics en-mass. I wanted to have a fairly comprehensive list of well-known rappers without having to recall every one by name. So, the first place I looked was the Wikipedia page ‘List of hip hop musicians’[link]. This has a pretty exhaustive list of over 1000 rap artists with Wikipedia pages. The first function I wrote simply goes to this page, downloads this data and outputs a list of all the rap artists’ names using the requests and BeautifulSoup modules to parse the HTML webpage. (Note, all packages I use are either in-built to python can be added easily with a simple pip install).  </p>
<p>We start by obtaining the Wikipedia URL, using requests to grab the HTML, then using BeautifulSoup to create a BS object, using the key "a" to get the titles. If you're not familiar with BeautifulSoup don't worry - neither was I. It basically takes a lump of raw HTML data and converts it into a nice custom object that allows you to access things quickly within it. They have some nice docs online which I suggest you read if you are unsure. Next, we loop through the titles, extracting all the artist names and appending them to a list. The code I have was just a bit of trial and error. It's not the most pretty, but it gets the job done. Our function outputs a nice python list containing strings with all the artist names in. </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">master_list</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39; Call this function to return a python list containing a large </span>
<span class="sd">        master list of rap artists names&#39;&#39;&#39;</span>

    <span class="n">wiki_url</span> <span class="o">=</span> <span class="s1">&#39;https://en.wikipedia.org/wiki/List_of_hip_hop_musicians&#39;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">wiki_url</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span> 
    <span class="n">artists_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
    <span class="n">artists_started</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">artists</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists_raw</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">artist</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s1">&#39;100 Kila&#39;</span><span class="p">:</span>    <span class="c1">#First rapper on the list</span>
                <span class="n">artists_started</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="n">artists_started</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">title</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Edit&#39;</span> <span class="ow">and</span> <span class="n">title</span> <span class="o">!=</span> <span class="s1">&#39;Enlarge&#39;</span><span class="p">:</span>    <span class="c1">#Messy</span>
                    <span class="k">if</span> <span class="s1">&#39;(&#39;</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
                        <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">[:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">artists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s1">&#39;Zico&#39;</span><span class="p">:</span>    <span class="c1">#This is the last rapper on the list</span>
                <span class="k">break</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">return</span> <span class="n">artists</span>
</pre></div>


<p>From this list, I chose a selection of rappers that I knew personally and thought were worth including. Please forgive me if I have ommitted any big names! I did this manually, copying and pasting the master list, then removing rappers I didn't want to include. Laborious maybe, but I wanted to have control over each rapper in the list, making sure all my prsonal favourites made it on. This left the following</p>
<div class="highlight"><pre><span></span><span class="n">my_artist_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2 Chainz&#39;</span><span class="p">,</span><span class="s1">&#39;21 Savage&#39;</span><span class="p">,</span><span class="s1">&#39;50 Cent&#39;</span><span class="p">,</span><span class="s1">&#39;Andre 3000&#39;</span><span class="p">,</span><span class="s1">&#39;Big Boi&#39;</span><span class="p">,</span><span class="s1">&#39;Ab-Soul&#39;</span><span class="p">,</span><span class="s1">&#39;Abstract Rude&#39;</span><span class="p">,</span><span class="s1">&#39;Ace Hood&#39;</span><span class="p">,</span><span class="s1">&#39;Action Bronson&#39;</span><span class="p">,</span>
<span class="s1">&#39;Aesop Rock&#39;</span><span class="p">,</span><span class="s1">&#39;Afrika Bambaataa&#39;</span><span class="p">,</span><span class="s1">&#39;Afroman&#39;</span><span class="p">,</span><span class="s1">&#39;Akala&#39;</span><span class="p">,</span><span class="s1">&#39;Akon&#39;</span><span class="p">,</span><span class="s1">&#39;Anderson .Paak&#39;</span><span class="p">,</span><span class="s1">&#39;Andre 3000&#39;</span><span class="p">,</span><span class="s1">&#39;Angel Haze&#39;</span><span class="p">,</span><span class="s1">&#39;A$AP Ferg&#39;</span><span class="p">,</span><span class="s1">&#39;A$AP Rocky&#39;</span><span class="p">,</span>
<span class="s1">&#39;Asher Roth&#39;</span><span class="p">,</span><span class="s1">&#39;Astronautalis&#39;</span><span class="p">,</span><span class="s1">&#39;Awol One&#39;</span><span class="p">,</span><span class="s1">&#39;Awkwafina&#39;</span><span class="p">,</span><span class="s1">&#39;Azealia Banks&#39;</span><span class="p">,</span><span class="s1">&#39;Big Daddy Kane&#39;</span><span class="p">,</span><span class="s1">&#39;B-Real&#39;</span><span class="p">,</span><span class="s1">&#39;B.o.B&#39;</span><span class="p">,</span><span class="s1">&#39;Benzino&#39;</span><span class="p">,</span><span class="s1">&#39;Beastie Boys&#39;</span><span class="p">,</span>
<span class="s1">&#39;Big Boi&#39;</span><span class="p">,</span><span class="s1">&#39;Big K.R.I.T.&#39;</span><span class="p">,</span><span class="s1">&#39;Big L&#39;</span><span class="p">,</span><span class="s1">&#39;Big Pun&#39;</span><span class="p">,</span><span class="s1">&#39;Big Scoob&#39;</span><span class="p">,</span><span class="s1">&#39;Big Sean&#39;</span><span class="p">,</span><span class="s1">&#39;Billy Woods&#39;</span><span class="p">,</span><span class="s1">&#39;Birdman&#39;</span><span class="p">,</span><span class="s1">&#39;Bishop Nehru&#39;</span><span class="p">,</span><span class="s1">&#39;Bizarre&#39;</span><span class="p">,</span><span class="s1">&#39;Bizzy Bone&#39;</span><span class="p">,</span>
<span class="s1">&#39;BJ the Chicago Kid&#39;</span><span class="p">,</span><span class="s1">&#39;Bobby Shmurda&#39;</span><span class="p">,</span><span class="s1">&#39;Bone Crusher&#39;</span><span class="p">,</span><span class="s1">&#39;Boosie Badazz&#39;</span><span class="p">,</span><span class="s1">&#39;Brotha Lynch Hung&#39;</span><span class="p">,</span><span class="s1">&#39;Brother Ali&#39;</span><span class="p">,</span><span class="s1">&#39;Bubba Sparxxx&#39;</span><span class="p">,</span><span class="s1">&#39;Bun B&#39;</span><span class="p">,</span>
<span class="s1">&#39;Busdriver&#39;</span><span class="p">,</span><span class="s1">&#39;Busta Rhymes&#39;</span><span class="p">,</span><span class="s1">&#39;Cage&#39;</span><span class="p">,</span><span class="s1">&#39;Canibus&#39;</span><span class="p">,</span><span class="s1">&#39;CeeLo Green&#39;</span><span class="p">,</span><span class="s1">&#39;Ceschi&#39;</span><span class="p">,</span><span class="s1">&#39;Chamillionaire&#39;</span><span class="p">,</span><span class="s1">&#39;Chance the Rapper&#39;</span><span class="p">,</span><span class="s1">&#39;Chiddy Bang&#39;</span><span class="p">,</span><span class="s1">&#39;Chief Keef&#39;</span><span class="p">,</span>
<span class="s1">&#39;Childish Gambino&#39;</span><span class="p">,</span><span class="s1">&#39;Chino XL&#39;</span><span class="p">,</span><span class="s1">&#39;Chris Brown&#39;</span><span class="p">,</span><span class="s1">&#39;Chris Webby&#39;</span><span class="p">,</span><span class="s1">&#39;Classified&#39;</span><span class="p">,</span><span class="s1">&#39;Common&#39;</span><span class="p">,</span><span class="s1">&#39;Coolio&#39;</span><span class="p">,</span><span class="s1">&#39;Count Bass D&#39;</span><span class="p">,</span><span class="s1">&#39;Crooked I&#39;</span><span class="p">,</span><span class="s1">&#39;D</span><span class="se">\&#39;</span><span class="s1">Angelo&#39;</span><span class="p">,</span>
<span class="s1">&#39;Dan Bull&#39;</span><span class="p">,</span><span class="s1">&#39;Danny Brown&#39;</span><span class="p">,</span><span class="s1">&#39;Dappy&#39;</span><span class="p">,</span><span class="s1">&#39;Daveed Diggs&#39;</span><span class="p">,</span><span class="s1">&#39;Del the Funky Homosapien&#39;</span><span class="p">,</span><span class="s1">&#39;Denzel Curry&#39;</span><span class="p">,</span><span class="s1">&#39;Desiigner&#39;</span><span class="p">,</span><span class="s1">&#39;Devin the Dude&#39;</span><span class="p">,</span><span class="s1">&#39;Devlin&#39;</span><span class="p">,</span>
<span class="s1">&#39;Dizzee Rascal&#39;</span><span class="p">,</span><span class="s1">&#39;Dizzy Wright&#39;</span><span class="p">,</span><span class="s1">&#39;DMX&#39;</span><span class="p">,</span><span class="s1">&#39;Dr. Dre&#39;</span><span class="p">,</span><span class="s1">&#39;Drake&#39;</span><span class="p">,</span><span class="s1">&#39;E-40&#39;</span><span class="p">,</span><span class="s1">&#39;Earl Sweatshirt&#39;</span><span class="p">,</span><span class="s1">&#39;Eazy-E&#39;</span><span class="p">,</span><span class="s1">&#39;El-P&#39;</span><span class="p">,</span><span class="s1">&#39;Elephant Man&#39;</span><span class="p">,</span><span class="s1">&#39;Eminem&#39;</span><span class="p">,</span><span class="s1">&#39;Eve&#39;</span><span class="p">,</span>
<span class="s1">&#39;Eyedea&#39;</span><span class="p">,</span><span class="s1">&#39;Fetty Wap&#39;</span><span class="p">,</span><span class="s1">&#39;Flavor Flav&#39;</span><span class="p">,</span><span class="s1">&#39;Flo Rida&#39;</span><span class="p">,</span><span class="s1">&#39;Flying Lotus&#39;</span><span class="p">,</span><span class="s1">&#39;Fort Minor&#39;</span><span class="p">,</span><span class="s1">&#39;Foxy Brown&#39;</span><span class="p">,</span><span class="s1">&#39;Frank Ocean&#39;</span><span class="p">,</span><span class="s1">&#39;Freddie Gibbs&#39;</span><span class="p">,</span>
<span class="s1">&#39;French Montana&#39;</span><span class="p">,</span><span class="s1">&#39;Funkmaster Flex&#39;</span><span class="p">,</span><span class="s1">&#39;Future&#39;</span><span class="p">,</span><span class="s1">&#39;The Game&#39;</span><span class="p">,</span><span class="s1">&#39;Gangsta Boo&#39;</span><span class="p">,</span><span class="s1">&#39;Ghostface Killah&#39;</span><span class="p">,</span><span class="s1">&#39;Giggs&#39;</span><span class="p">,</span><span class="s1">&#39;Grandmaster Caz&#39;</span><span class="p">,</span>
<span class="s1">&#39;Grandmaster Flash&#39;</span><span class="p">,</span><span class="s1">&#39;Greydon Square&#39;</span><span class="p">,</span><span class="s1">&#39;Grieves&#39;</span><span class="p">,</span><span class="s1">&#39;Gucci Mane&#39;</span><span class="p">,</span><span class="s1">&#39;Gudda Gudda&#39;</span><span class="p">,</span><span class="s1">&#39;Guilty Simpson&#39;</span><span class="p">,</span><span class="s1">&#39;GZA&#39;</span><span class="p">,</span><span class="s1">&#39;Hemlock Ernst&#39;</span><span class="p">,</span><span class="s1">&#39;Heems&#39;</span><span class="p">,</span>
<span class="s1">&#39;Hodgy Beats&#39;</span><span class="p">,</span><span class="s1">&#39;Hopsin&#39;</span><span class="p">,</span><span class="s1">&#39;Ice Cube&#39;</span><span class="p">,</span><span class="s1">&#39;Ice-T&#39;</span><span class="p">,</span><span class="s1">&#39;Iggy Azalea&#39;</span><span class="p">,</span><span class="s1">&#39;Immortal Technique&#39;</span><span class="p">,</span><span class="s1">&#39;Isaiah Rashad&#39;</span><span class="p">,</span><span class="s1">&#39;J. Cole&#39;</span><span class="p">,</span><span class="s1">&#39;Ja Rule&#39;</span><span class="p">,</span><span class="s1">&#39;Jadakiss&#39;</span><span class="p">,</span>
<span class="s1">&#39;Jaden Smith&#39;</span><span class="p">,</span><span class="s1">&#39;Jam Master Jay&#39;</span><span class="p">,</span><span class="s1">&#39;Jam Baxter&#39;</span><span class="p">,</span><span class="s1">&#39;Jarren Benton&#39;</span><span class="p">,</span><span class="s1">&#39;Jay Electronica&#39;</span><span class="p">,</span><span class="s1">&#39;Jay Rock&#39;</span><span class="p">,</span><span class="s1">&#39;Jay Z&#39;</span><span class="p">,</span><span class="s1">&#39;Jean Grae&#39;</span><span class="p">,</span><span class="s1">&#39;Jeremiah Jae&#39;</span><span class="p">,</span>
<span class="s1">&#39;Jeremih&#39;</span><span class="p">,</span><span class="s1">&#39;Jme&#39;</span><span class="p">,</span><span class="s1">&#39;Joe Budden&#39;</span><span class="p">,</span><span class="s1">&#39;Joell Ortiz&#39;</span><span class="p">,</span><span class="s1">&#39;Joey Badass&#39;</span><span class="p">,</span><span class="s1">&#39;Juelz Santana&#39;</span><span class="p">,</span><span class="s1">&#39;Juicy J&#39;</span><span class="p">,</span><span class="s1">&#39;Lauryn Hill&#39;</span><span class="p">,</span><span class="s1">&#39;Kanye West&#39;</span><span class="p">,</span><span class="s1">&#39;Kendrick Lamar&#39;</span><span class="p">,</span>
<span class="s1">&#39;Kevin Gates&#39;</span><span class="p">,</span><span class="s1">&#39;Kid Cudi&#39;</span><span class="p">,</span><span class="s1">&#39;Kid Ink&#39;</span><span class="p">,</span><span class="s1">&#39;Kid Rock&#39;</span><span class="p">,</span><span class="s1">&#39;Killer Mike&#39;</span><span class="p">,</span><span class="s1">&#39;Kodak Black&#39;</span><span class="p">,</span><span class="s1">&#39;Victor Vazquez&#39;</span><span class="p">,</span><span class="s1">&#39;Kool G Rap&#39;</span><span class="p">,</span><span class="s1">&#39;Kool A.D.&#39;</span><span class="p">,</span><span class="s1">&#39;Kool Keith&#39;</span><span class="p">,</span>
<span class="s1">&#39;Krayzie Bone&#39;</span><span class="p">,</span><span class="s1">&#39;Krizz Kaliko&#39;</span><span class="p">,</span><span class="s1">&#39;KRS-One&#39;</span><span class="p">,</span><span class="s1">&#39;Lil</span><span class="se">\&#39;</span><span class="s1"> Kim&#39;</span><span class="p">,</span><span class="s1">&#39;Lil Jon&#39;</span><span class="p">,</span><span class="s1">&#39;Lil Uzi Vert&#39;</span><span class="p">,</span><span class="s1">&#39;Lil Wayne&#39;</span><span class="p">,</span><span class="s1">&#39;Lil Yachty&#39;</span><span class="p">,</span><span class="s1">&#39;Little Simz&#39;</span><span class="p">,</span><span class="s1">&#39;LL Cool J&#39;</span><span class="p">,</span>
<span class="s1">&#39;Lloyd Banks&#39;</span><span class="p">,</span><span class="s1">&#39;Logic&#39;</span><span class="p">,</span><span class="s1">&#39;Louis Logic&#39;</span><span class="p">,</span><span class="s1">&#39;Lowkey&#39;</span><span class="p">,</span><span class="s1">&#39;Ludacris&#39;</span><span class="p">,</span><span class="s1">&#39;Lupe Fiasco&#39;</span><span class="p">,</span><span class="s1">&#39;M.I.A.&#39;</span><span class="p">,</span><span class="s1">&#39;Mac Lethal&#39;</span><span class="p">,</span><span class="s1">&#39;Mac Miller&#39;</span><span class="p">,</span><span class="s1">&#39;Machine Gun Kelly&#39;</span><span class="p">,</span>
<span class="s1">&#39;Macklemore&#39;</span><span class="p">,</span><span class="s1">&#39;Masta Ace&#39;</span><span class="p">,</span><span class="s1">&#39;Masta Killa&#39;</span><span class="p">,</span><span class="s1">&#39;Master P&#39;</span><span class="p">,</span><span class="s1">&#39;MC Ren&#39;</span><span class="p">,</span><span class="s1">&#39;Meek Mill&#39;</span><span class="p">,</span><span class="s1">&#39;Method Man&#39;</span><span class="p">,</span><span class="s1">&#39;MF Doom&#39;</span><span class="p">,</span><span class="s1">&#39;MF Grimm&#39;</span><span class="p">,</span><span class="s1">&#39;Mick Jenkins&#39;</span><span class="p">,</span><span class="s1">&#39;Milo&#39;</span><span class="p">,</span>
<span class="s1">&#39;Mims&#39;</span><span class="p">,</span><span class="s1">&#39;Missy Elliott&#39;</span><span class="p">,</span><span class="s1">&#39;Mos Def&#39;</span><span class="p">,</span><span class="s1">&#39;Mr. Muthafuckin</span><span class="se">\&#39;</span><span class="s1"> eXquire&#39;</span><span class="p">,</span><span class="s1">&#39;Mr. Porter&#39;</span><span class="p">,</span><span class="s1">&#39;Murs&#39;</span><span class="p">,</span><span class="s1">&#39;Nas&#39;</span><span class="p">,</span><span class="s1">&#39;Nate Dogg&#39;</span><span class="p">,</span><span class="s1">&#39;Nelly&#39;</span><span class="p">,</span><span class="s1">&#39;Nicki Minaj&#39;</span><span class="p">,</span>
<span class="s1">&#39;Nitty Scott, MC&#39;</span><span class="p">,</span><span class="s1">&#39;Noname&#39;</span><span class="p">,</span><span class="s1">&#39;Nocando&#39;</span><span class="p">,</span><span class="s1">&#39;The Notorious B.I.G.&#39;</span><span class="p">,</span><span class="s1">&#39;Obie Trice&#39;</span><span class="p">,</span><span class="s1">&#39;Oddisee&#39;</span><span class="p">,</span><span class="s1">&#39;OG Maco&#39;</span><span class="p">,</span><span class="s1">&#39;Ol</span><span class="se">\&#39;</span><span class="s1"> Dirty Bastard&#39;</span><span class="p">,</span>
<span class="s1">&#39;Open Mike Eagle&#39;</span><span class="p">,</span><span class="s1">&#39;Q-Tip&#39;</span><span class="p">,</span><span class="s1">&#39;Pharoahe Monch&#39;</span><span class="p">,</span><span class="s1">&#39;Pharrell Williams&#39;</span><span class="p">,</span><span class="s1">&#39;Phife Dawg&#39;</span><span class="p">,</span><span class="s1">&#39;Pimp C&#39;</span><span class="p">,</span><span class="s1">&#39;Pitbull&#39;</span><span class="p">,</span><span class="s1">&#39;P.O.S.&#39;</span><span class="p">,</span><span class="s1">&#39;Prince Paul&#39;</span><span class="p">,</span>
<span class="s1">&#39;Professor Green&#39;</span><span class="p">,</span><span class="s1">&#39;Proof&#39;</span><span class="p">,</span><span class="s1">&#39;Prozak&#39;</span><span class="p">,</span><span class="s1">&#39;Pusha T&#39;</span><span class="p">,</span><span class="s1">&#39;Quasimoto&#39;</span><span class="p">,</span><span class="s1">&#39;R. Kelly&#39;</span><span class="p">,</span><span class="s1">&#39;R.A. the Rugged Man&#39;</span><span class="p">,</span><span class="s1">&#39;Raekwon&#39;</span><span class="p">,</span><span class="s1">&#39;Rakim&#39;</span><span class="p">,</span><span class="s1">&#39;Ras Kass&#39;</span><span class="p">,</span><span class="s1">&#39;Redman&#39;</span><span class="p">,</span>
<span class="s1">&#39;Rich Homie Quan&#39;</span><span class="p">,</span><span class="s1">&#39;Rick Ross&#39;</span><span class="p">,</span><span class="s1">&#39;Riff Raff&#39;</span><span class="p">,</span><span class="s1">&#39;Rittz&#39;</span><span class="p">,</span><span class="s1">&#39;Roc Marciano&#39;</span><span class="p">,</span><span class="s1">&#39;Roots Manuva&#39;</span><span class="p">,</span><span class="s1">&#39;Royce da 5</span><span class="se">\&#39;</span><span class="s1">9</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;RZA&#39;</span><span class="p">,</span><span class="s1">&#39;Snoop Dogg&#39;</span><span class="p">,</span><span class="s1">&#39;Sadistik&#39;</span><span class="p">,</span>
<span class="s1">&#39;Sage Francis&#39;</span><span class="p">,</span><span class="s1">&#39;Scarface&#39;</span><span class="p">,</span><span class="s1">&#39;Schoolboy Q&#39;</span><span class="p">,</span><span class="s1">&#39;Sean Paul&#39;</span><span class="p">,</span><span class="s1">&#39;Sean Price&#39;</span><span class="p">,</span><span class="s1">&#39;Sho Baraka&#39;</span><span class="p">,</span><span class="s1">&#39;Sir Mix-a-Lot&#39;</span><span class="p">,</span><span class="s1">&#39;Slick Rick&#39;</span><span class="p">,</span><span class="s1">&#39;Slug&#39;</span><span class="p">,</span><span class="s1">&#39;Snoop Dogg&#39;</span><span class="p">,</span>
<span class="s1">&#39;Snow Tha Product&#39;</span><span class="p">,</span><span class="s1">&#39;Soulja Boy&#39;</span><span class="p">,</span><span class="s1">&#39;SpaceGhostPurrp&#39;</span><span class="p">,</span><span class="s1">&#39;Sticky Fingaz&#39;</span><span class="p">,</span><span class="s1">&#39;Swizz Beatz&#39;</span><span class="p">,</span><span class="s1">&#39;SwizZz&#39;</span><span class="p">,</span><span class="s1">&#39;SZA&#39;</span><span class="p">,</span><span class="s1">&#39;T.I.&#39;</span><span class="p">,</span><span class="s1">&#39;T-Pain&#39;</span><span class="p">,</span><span class="s1">&#39;T.O.P&#39;</span><span class="p">,</span>
<span class="s1">&#39;Taio Cruz&#39;</span><span class="p">,</span><span class="s1">&#39;Talib Kweli&#39;</span><span class="p">,</span><span class="s1">&#39;Tech N9ne&#39;</span><span class="p">,</span><span class="s1">&#39;Timbaland&#39;</span><span class="p">,</span><span class="s1">&#39;Tinie Tempah&#39;</span><span class="p">,</span><span class="s1">&#39;Too Short&#39;</span><span class="p">,</span><span class="s1">&#39;Tory Lanez&#39;</span><span class="p">,</span><span class="s1">&#39;Travis Scott&#39;</span><span class="p">,</span><span class="s1">&#39;Traxamillion&#39;</span><span class="p">,</span>
<span class="s1">&#39;Trey Songz&#39;</span><span class="p">,</span><span class="s1">&#39;Trick-Trick&#39;</span><span class="p">,</span><span class="s1">&#39;Tupac Shakur&#39;</span><span class="p">,</span><span class="s1">&#39;Twista&#39;</span><span class="p">,</span><span class="s1">&#39;Twisted Insane&#39;</span><span class="p">,</span><span class="s1">&#39;Ty Dolla Sign&#39;</span><span class="p">,</span><span class="s1">&#39;Tyga&#39;</span><span class="p">,</span><span class="s1">&#39;Tyler, The Creator&#39;</span><span class="p">,</span><span class="s1">&#39;U-God&#39;</span><span class="p">,</span>
<span class="s1">&#39;Vast Aire&#39;</span><span class="p">,</span><span class="s1">&#39;Vic Mensa&#39;</span><span class="p">,</span><span class="s1">&#39;Vince Staples&#39;</span><span class="p">,</span><span class="s1">&#39;Violent J&#39;</span><span class="p">,</span><span class="s1">&#39;Xzibit&#39;</span><span class="p">,</span><span class="s1">&#39;Waka Flocka Flame&#39;</span><span class="p">,</span><span class="s1">&#39;Wale&#39;</span><span class="p">,</span><span class="s1">&#39;Watsky&#39;</span><span class="p">,</span><span class="s1">&#39;Will Smith&#39;</span><span class="p">,</span><span class="s1">&#39;Will.i.am&#39;</span><span class="p">,</span>
<span class="s1">&#39;Wiz Khalifa&#39;</span><span class="p">,</span><span class="s1">&#39;Wrekonize&#39;</span><span class="p">,</span><span class="s1">&#39;XXXTENTACION&#39;</span><span class="p">,</span><span class="s1">&#39;Young Jeezy&#39;</span><span class="p">,</span><span class="s1">&#39;Yelawolf&#39;</span><span class="p">,</span><span class="s1">&#39;Young Buck&#39;</span><span class="p">,</span><span class="s1">&#39;Young Thug&#39;</span><span class="p">,</span><span class="s1">&#39;Your Old Droog&#39;</span><span class="p">,</span><span class="s1">&#39;Yukmouth&#39;</span><span class="p">,</span>
<span class="s1">&#39;Yung Lean&#39;</span><span class="p">,</span><span class="s1">&#39;Zebra Katz&#39;</span><span class="p">]</span>
</pre></div>


<h3>2.2 Accessing lyrics</h3>
<p>Now comes the slightly more complex task of downloading lyrics for every artist listed. To do this we're going to use the webiste Genius.com, by far the largest lyric database online. They actually have an API which you can use, however it looked like it was more trouble than it was worth and I couldn't get hold of a developer's authentication token. The benefit of Genius is that it is very extensive and fairly standardised. The draw back is it's a flashy website with a lot of javascipt increasing load times and making it a little difficult to navigate in python. It is a bit slow, but using just requests and BeautifulSoup it's possible to access each artist's page and download their lyrics. </p>
<p>The first step then is to find the correct URL for each artist. With genius, this is relatively simple since the artist page URL tends to follow a very simple formula: https://genius.com/artists/Artist-name where the first letter of the artist's name is always capitalised and the rest is lower-case, multiple words are joined with a hyphen, and any apostraphes and full stops are removed. Examples would be:</p>
<ul>
<li>https://genius.com/artists/Meek-mill</li>
<li>https://genius.com/artists/Method-man</li>
<li>https://genius.com/artists/Mf-doom</li>
</ul>
<p>Our first function therefore converts the names as written in the above list into the corect artist URLs on Genius. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">name_to_url</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Take an artists name and output the link to their genius page&#39;&#39;&#39;</span>

    <span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;https://genius.com/artists/&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>    <span class="c1">#remove apostrophes and full stops</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">split_name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">name_new</span> <span class="o">=</span> <span class="n">split_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">name_new</span> <span class="o">=</span> <span class="n">name_new</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">name_new</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>    <span class="c1">#ensure first letter of first word is capitalised</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">split_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">name_new</span><span class="o">=</span> <span class="n">name_new</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>    <span class="c1">#add words together with hyphen</span>

    <span class="k">return</span> <span class="n">base_url</span><span class="o">+</span><span class="n">name_new</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="k">print</span><span class="p">(</span><span class="n">name_to_url</span><span class="p">(</span><span class="n">name</span><span class="p">))</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;KRS-One&#39;</span><span class="p">,</span><span class="s1">&#39;LL Cool J&#39;</span><span class="p">,</span><span class="s1">&#39;MF Doom&#39;</span><span class="p">]</span> <span class="p">]</span> 
</pre></div>


<div class="highlight"><pre><span></span>https://genius.com/artists/Krs-one
https://genius.com/artists/Ll-cool-j
https://genius.com/artists/Mf-doom
</pre></div>


<p>I found the best way to access individual songs from here was through the albums linked from this page. This is because unfortunately, without messing around with the javascript, you only have access to a few songs directly from this page, whereas you can directly access six albums, where you can link directly to all the songs. So my next step was to find links to all albums possible. </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">get_albums</span><span class="p">(</span><span class="n">artist_url</span><span class="p">):</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">artist_url</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">html</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)]</span>
    <span class="n">top_albums</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;vertical_album_card&quot;</span><span class="p">)</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">album</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">album</span> <span class="ow">in</span> <span class="n">top_albums</span><span class="p">]</span>   
    <span class="k">return</span> <span class="n">urls</span>

<span class="c1"># Test: Find the links to the 6 most recent MF Doom albums on Genius </span>
<span class="n">MF_Doom_albums</span> <span class="o">=</span> <span class="n">get_albums</span><span class="p">(</span><span class="n">name_to_url</span><span class="p">(</span><span class="s1">&#39;MF Doom&#39;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">album_link</span> <span class="ow">in</span> <span class="n">MF_Doom_albums</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">album_link</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>https://genius.com/albums/Mf-doom/Born-like-this
https://genius.com/albums/Mf-doom/Metalfingers-presents-special-herbs-the-box-set-vol-0-9-disc-2
https://genius.com/albums/Mf-doom/Metal-fingers-presents-special-herbs-the-box-set-vol-0-9-disc-1
https://genius.com/albums/Mf-doom/Mm-food
https://genius.com/albums/Mf-doom/Special-blends-volume-1-2
https://genius.com/albums/Mf-doom/Dead-bent-doomsday
</pre></div>


<p>Next, given an album url we want to extract the urls and titles of all the songs on that album</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_songs</span><span class="p">(</span><span class="n">album_url</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Take an album URL link and find all the song titles and their related URLs&#39;&#39;&#39;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">album_url</span><span class="p">)</span>
    <span class="n">bs_object</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="n">songs</span> <span class="o">=</span> <span class="n">bs_object</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;u-display_block&quot;</span><span class="p">)</span>
    <span class="n">song_urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">song</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">songs</span><span class="p">]</span>  <span class="c1">#href to song</span>
    <span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">song</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">bs_object</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h3&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;chart_row-content-title&quot;</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">song_urls</span><span class="p">,</span> <span class="n">titles</span>

<span class="c1"># Test: Print all the titles and URLs for the most recent MF Doom album on Genius</span>
<span class="n">doom_urls</span><span class="p">,</span> <span class="n">doom_titles</span> <span class="o">=</span> <span class="n">get_songs</span><span class="p">(</span><span class="n">MF_Doom_albums</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">for</span> <span class="n">url</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">doom_urls</span><span class="p">,</span> <span class="n">doom_titles</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">[:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;Lyrics&#39;</span><span class="p">)])</span>
</pre></div>


<div class="highlight"><pre><span></span>https://genius.com/Mf-doom-beef-rapp-lyrics 
              Beef Rapp

https://genius.com/Mf-doom-hoe-cakes-lyrics 
              Hoe Cakes

https://genius.com/Mf-doom-potholderz-lyrics 
              Potholderz (Ft. Count Bass D)

https://genius.com/Mf-doom-one-beer-lyrics 
              One Beer

https://genius.com/Mf-doom-deep-fried-frenz-lyrics 
              Deep Fried Frenz

https://genius.com/Mf-doom-poo-putt-platter-lyrics 
              Poo Putt Platter

https://genius.com/Mf-doom-fillet-o-rapper-lyrics 
              Fillet-O-Rapper

https://genius.com/Mf-doom-gumbo-lyrics 
              Gumbo

https://genius.com/Mf-doom-fig-leaf-bi-carbonate-lyrics 
              Fig Leaf Bi-Carbonate

https://genius.com/Mf-doom-kon-karne-lyrics 
              Kon Karne

https://genius.com/Mf-doom-guinnesses-lyrics 
              Guinnesses (Ft. 4ize &amp; Stahhr)

https://genius.com/Mf-doom-kon-queso-lyrics 
              Kon Queso

https://genius.com/Mf-doom-rapp-snitch-knishes-lyrics 
              Rapp Snitch Knishes (Ft. Mr. Fantastik)

https://genius.com/Mf-doom-vomitspit-lyrics 
              Vomitspit

https://genius.com/Mf-doom-kookies-lyrics 
              Kookies

https://genius.com/Mf-doom-mm-food-tracklist-album-artwork-annotated 
              MM.. FOOD [Tracklist + Album Artwork]
</pre></div>


<p>The next step is to get the raw text of the lyrics for each song. It will also be useful to convert the text from unicode to ASCII for reasons that will become clear</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicodedata</span> <span class="kn">import</span> <span class="n">normalize</span>

<span class="k">def</span> <span class="nf">unicode_to_ascii</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a block of text from unicode to ascii&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKD&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_lyrics</span><span class="p">(</span><span class="n">song_url</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;take a song url and gather the raw text containg the lyrics for that song&#39;&#39;&#39;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">song_url</span><span class="p">)</span>
    <span class="n">bs_object</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    <span class="p">[</span><span class="n">h</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">bs_object</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)]</span>
    <span class="n">lyrics</span> <span class="o">=</span> <span class="n">bs_object</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;lyrics&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> 
    <span class="k">return</span> <span class="n">lyrics</span>

<span class="c1"># Test: Find the lyrics to the first track on the latest Doom album on Genius</span>
<span class="n">doom_lyrics</span> <span class="o">=</span> <span class="n">get_lyrics</span><span class="p">(</span><span class="n">doom_urls</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">doom_lyrics</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">[Intro: MF DOOM &amp; (Mr. Fantastik)]</span>
<span class="na">(Yo!) Yo!</span>
<span class="na">(MF DOOM) Mr. Fantastik</span>
<span class="na">(Mr. Fantastik) Villain</span>
<span class="na">(What up, nigga?) Ain&#39;t nuttin; what&#39;s the word?</span>
<span class="na">(What&#39;s cracking, boy?) Same ol&#39; shit, kid...</span>
<span class="na">(Man) ...different day, you know?</span>
<span class="na">(These rap snitches, man...</span>
<span class="na">Shit is bugged out, man. What the fuck, man?)</span>
<span class="na">Shit, you telling me. (Niggas running their mouth</span>
<span class="na">Telling e&#39;rything, e&#39;rything)</span>

<span class="k">[Hook 2X: Mr. Fantastik ]</span>
<span class="na">Rap snitches, telling all their business</span>
<span class="na">Sit in the court and be their own star witness</span>
<span class="na">Do you see the perpetrator? - Yeah, I&#39;m right here</span>
<span class="na">Fuck around, get the whole label sent up for years</span>

<span class="k">[Verse 1: Mr. Fantastik]</span>
<span class="na">Type profile low, like A in Paid in Full</span>
<span class="na">Attract heavy cash &#39;cause the game&#39;s centrifugal</span>
<span class="na">Mister Fantastik, long dough like elastic</span>
<span class="na">Guard my life with twin Glocks that&#39;s made out of plastic</span>
<span class="na">Can&#39;t stand a brown nosing nigga fake ass bastard</span>
<span class="na">Admiring my style, tour bus through Manhattan</span>
<span class="na">Plotting, plan the quickest, my flow&#39;s the sickest</span>
<span class="na">My hoes be the thickest, my dro the stickiest</span>
<span class="na">Street nigga, stamped and bonafide</span>
<span class="na">When beef jump niggas come get me &#39;cause they know I ride</span>
<span class="na">True to the ski mask, New York&#39;s my origin</span>
<span class="na">Play a fake gangsta like a old accordion</span>
<span class="na">According to him, when the D&#39;s rushed in</span>
<span class="na">Complication from the wire testimony was thin</span>
<span class="na">Caused his man to go up north, the ball hit &#39;em again</span>
<span class="na">Lame rap snitch nigga even told on the Mexican</span>

<span class="k">[Hook 2X: Mr. Fantastik]</span>
<span class="na">Rap snitches, telling all their business</span>
<span class="na">Sit in the court and be their own star witness</span>
<span class="na">Do you see the perpetrator? - Yeah, I&#39;m right here</span>
<span class="na">Fuck around, get the whole label sent up for years</span>

<span class="k">[Verse 2: MF DOOM]</span>
<span class="na">True, there&#39;s rules to this shit, fools dare care</span>
<span class="na">Everybody wanna rule the world with tears for fear</span>
<span class="na">Yeah, yeah, tell &#39;em tell it on the mountain hill</span>
<span class="na">Running up they mouth bill, everybody doubting still</span>
<span class="na">Informer, keep it up and get tested</span>
<span class="na">Pop through your bubble vest or double-breasted</span>
<span class="na">He keep a lab down south in the little beast</span>
<span class="na">So much heat you woulda thought it was the Middle East</span>
<span class="na">A little grease always keeps the wheels a spinning</span>
<span class="na">Like sitting on twenty threes to get the squealers grinning</span>
<span class="na">Hitting on many trees, feel real linen</span>
<span class="na">Spitting on enemies, get the steel for tin men</span>
<span class="na">Where no brains but gum flap</span>
<span class="na">He said his gun clap, then he fled after one slap (Pap!)</span>
<span class="na">Son, shut your trap, save it for the bitches</span>
<span class="na">Mmm, delicious, rapp snitch knishes</span>

<span class="k">[Outro: Mr. Fantastik &amp; (MF DOOM)]</span>
<span class="na">You know what I&#39;m saying?</span>
<span class="na">(It&#39;s terrible)</span>
<span class="na">Crazy, man, I&#39;m just analyzing this whole game</span>
<span class="na">This is bugged out, man, niggas is snitching</span>
<span class="na">Telling on they own self</span>
<span class="na">(It&#39;s a horror, yo)</span>
<span class="na">Fuck around and get everybody bagged, man</span>
<span class="na">(Atrocities)</span>
<span class="na">Fuck around and get yo mama bagged, nigga</span>
<span class="na">You know your grandmama used to be bootlegging...</span>
<span class="na">Fake hustling nigga</span>

<span class="na">Perpetrator? Yeah, I&#39;m right here...</span>
</pre></div>


<h2>2.3 Cleaning Lyrics</h2>
<p>One thing you might notice from the above example is that there are a number of songs on the album that have other artists featuring on. This is problematic as we want to analyse the lyrics of a single artist. One simple solution would be to simply disgard any song that has another artist featuring on it. However this seems unecessarily wasteful and for artists that typically have a lot of other people featuring on the album, it may prevent the artist from reaching the 20,000 word threshold. </p>
<p>Luckily, genius neatly formats featured verses in its lyrics in the following way; a verse by a featuring artist almost always has the name in square brackets like so [featuring artist]. This means, if we are expecting a featuring artist, we can write code to eliminate their verse from the song. The problem is this: the guest rapper may have one or more verses starting with [Artist Name] and ending with a double new line character. We want to return the lyrics text with these sections removed. </p>
<p>My function identifies each verse, determines whether the featuring artist's name is in the first section of each verse, and removes each verse identified as not the main artist's. This is by no means perfect. Although genius is relatively standardised, there will be exceptions, and bits of lyrical content not belonging to the main artist may sneak through. However, the simple rule in general gives realtively good results. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">remove_guest_verse</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">lyrics</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="n">verses_listed</span> <span class="o">=</span> <span class="n">lyrics</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">new_verses</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">verse</span> <span class="ow">in</span> <span class="n">verses_listed</span><span class="p">:</span>
        <span class="n">verse_start</span> <span class="o">=</span> <span class="n">verse</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">50</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="ow">in</span> <span class="n">verse_start</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_verses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">verse</span><span class="p">)</span>
    <span class="n">lyrics</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">verse</span> <span class="ow">in</span> <span class="n">new_verses</span><span class="p">:</span>
        <span class="n">lyrics</span> <span class="o">+=</span> <span class="n">verse</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
    <span class="k">return</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>

<span class="n">song_doom_only</span> <span class="o">=</span> <span class="n">remove_guest_verse</span><span class="p">(</span><span class="n">doom_lyrics</span><span class="p">,</span> <span class="s1">&#39;Mr. Fantastik&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">song_doom_only</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">[Verse 2: MF DOOM]</span>
<span class="na">True, there&#39;s rules to this shit, fools dare care</span>
<span class="na">Everybody wanna rule the world with tears for fear</span>
<span class="na">Yeah, yeah, tell &#39;em tell it on the mountain hill</span>
<span class="na">Running up they mouth bill, everybody doubting still</span>
<span class="na">Informer, keep it up and get tested</span>
<span class="na">Pop through your bubble vest or double-breasted</span>
<span class="na">He keep a lab down south in the little beast</span>
<span class="na">So much heat you woulda thought it was the Middle East</span>
<span class="na">A little grease always keeps the wheels a spinning</span>
<span class="na">Like sitting on twenty threes to get the squealers grinning</span>
<span class="na">Hitting on many trees, feel real linen</span>
<span class="na">Spitting on enemies, get the steel for tin men</span>
<span class="na">Where no brains but gum flap</span>
<span class="na">He said his gun clap, then he fled after one slap (Pap!)</span>
<span class="na">Son, shut your trap, save it for the bitches</span>
<span class="na">Mmm, delicious, rapp snitch knishes</span>

<span class="na">Perpetrator? Yeah, I&#39;m right here...</span>
</pre></div>


<p>The last two helper functions we will write before creating the main function to put this all together. The first is a cleaner function. It removes all lines starting with useless words like [chorus] and all repeated lines. Then, a small (perhaps unecessary, but I like it) function to save our lyrics to a .txt file. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="n">lyrics</span><span class="p">):</span>
    <span class="n">line_list</span> <span class="o">=</span> <span class="n">lyrics</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">line_list</span> <span class="k">if</span> <span class="p">((</span><span class="s1">&#39;[&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="ow">and</span> <span class="n">line_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line_list</span><span class="p">)</span>

<span class="n">cleaned</span> <span class="o">=</span> <span class="n">clean</span><span class="p">(</span><span class="n">song_doom_only</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cleaned</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>True, there&#39;s rules to this shit, fools dare care
Everybody wanna rule the world with tears for fear
Yeah, yeah, tell &#39;em tell it on the mountain hill
Running up they mouth bill, everybody doubting still
Informer, keep it up and get tested
Pop through your bubble vest or double-breasted
He keep a lab down south in the little beast
So much heat you woulda thought it was the Middle East
A little grease always keeps the wheels a spinning
Like sitting on twenty threes to get the squealers grinning
Hitting on many trees, feel real linen
Spitting on enemies, get the steel for tin men
Where no brains but gum flap
He said his gun clap, then he fled after one slap (Pap!)
Son, shut your trap, save it for the bitches
Mmm, delicious, rapp snitch knishes
Perpetrator? Yeah, I&#39;m right here...
</pre></div>


<p>If you're running this as a script on windows I recommend creating un-commenting the two top lines, creating a folder called text and using that structure to save all .txt files to that folder. </p>
<div class="highlight"><pre><span></span><span class="c1"># import os</span>
<span class="c1"># path = os.path.dirname(os.path.realpath(__file__)).replace(&#39;\\&#39;, &#39;/&#39;)+&#39;/text/&#39;</span>

<span class="k">def</span> <span class="nf">lyrics_to_txt</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">artist</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">thefile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="n">artist</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">thefile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lyrics</span><span class="p">)</span>
</pre></div>


<p>The following code puts all previous functions together into one coherent subroutine. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">save_lyrics</span><span class="p">(</span><span class="n">artist</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">name_to_url</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
    <span class="n">album_urls</span> <span class="o">=</span>  <span class="n">get_albums</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">word_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">all_lyrics</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">album_urls</span><span class="p">)</span><span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="c1">#for each album</span>
        <span class="k">for</span> <span class="n">album_url</span> <span class="ow">in</span> <span class="n">album_urls</span><span class="p">:</span>
            <span class="n">song_urls</span><span class="p">,</span> <span class="n">song_titles</span> <span class="o">=</span> <span class="n">get_songs</span><span class="p">(</span><span class="n">album_url</span><span class="p">)</span>

            <span class="c1">#for each song</span>
            <span class="k">for</span> <span class="n">song_url</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">song_urls</span><span class="p">,</span> <span class="n">song_titles</span><span class="p">):</span>
                <span class="n">feat</span><span class="o">=</span><span class="p">[]</span>
                <span class="c1">#find featuring artists</span>
                <span class="k">if</span> <span class="s1">&#39;Ft&#39;</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
                    <span class="n">feat</span> <span class="o">=</span> <span class="n">title</span><span class="p">[</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span><span class="p">:</span><span class="n">title</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">,</span> <span class="s1">&#39; &amp; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &amp; &#39;</span><span class="p">)</span>

                <span class="c1">#get lyrics</span>
                <span class="n">lyrics</span> <span class="o">=</span> <span class="n">get_lyrics</span><span class="p">(</span><span class="n">song_url</span><span class="p">)</span>

                <span class="c1">#remove guest verses and clean up</span>
                <span class="k">for</span> <span class="n">guest</span> <span class="ow">in</span> <span class="n">feat</span><span class="p">:</span>
                    <span class="n">lyrics</span> <span class="o">=</span> <span class="n">remove_guest_verse</span><span class="p">(</span><span class="n">lyrics</span><span class="p">,</span> <span class="n">guest</span><span class="p">)</span>
                <span class="n">lyrics</span> <span class="o">=</span> <span class="n">clean</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>

                <span class="n">all_lyrics</span> <span class="o">=</span> <span class="n">all_lyrics</span> <span class="o">+</span> <span class="n">lyrics</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span>

                <span class="c1">#check the word count</span>
                <span class="n">word_count</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lyrics</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span> 
                <span class="k">if</span> <span class="n">word_count</span><span class="o">&gt;=</span> <span class="mi">20000</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">&#39; complete&#39;</span><span class="p">)</span>

                    <span class="k">print</span><span class="p">(</span><span class="n">all_lyrics</span><span class="p">,</span> <span class="n">artist</span><span class="p">)</span>
                    <span class="k">return</span> 

        <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">&#39; Couldn</span><span class="se">\&#39;</span><span class="s1">t get to 20,000 words&#39;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">album_urls</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">&#39; Problem loading page&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">artist</span> <span class="o">+</span> <span class="s1">&#39; Not enough albums&#39;</span><span class="p">)</span>

<span class="c1">#save_lyrics(&#39;2 Chainz&#39;)</span>
</pre></div>


<p>Hooray! We finally have a complete function for gathering lyrics. Part one complete. Now for the fun stuff: lyric analysis. As a recap, the two metrics I'm going to target are verbosity and rhyme density, i.e. the fraction of the 20,000 words that are unique, and the fraction which rhyme with each other. The first part is MUCH MUCH simpler than the second as we shall see. </p>
<h1>Analysing the Lyrics</h1>
<h2>3.1 Unique Words</h2>
<p>We can do a basic word count pretty easily. The only complication comes from deciding what counts as a word. While this might sound easy, there's actually a significant amount of difficulty that arises from this. The headache can be avoided entirely by using a third party word tokeniser. The most renound python module out there for this kind of analysis is the Natural Language Tool-Kit (NLTK) package. You can go to to their website for documentation. For now, I'm just going to use it in the code. </p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">word_tokenize</span>

<span class="n">punc</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>  <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">word_freq_list</span><span class="p">(</span><span class="n">text_file</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Take an input .txt file and perform a unique word count&#39;&#39;&#39;</span>
    <span class="n">thefile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="n">text_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">counts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">total_words</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">thefile</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">punc</span><span class="p">:</span>
                    <span class="n">words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                    <span class="n">counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">total_words</span> <span class="o">+=</span> <span class="mi">1</span>        
            <span class="k">else</span><span class="p">:</span>
                <span class="n">counts</span><span class="p">[</span><span class="n">words</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">word</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">total_words</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">total_words</span><span class="o">&gt;=</span><span class="mi">20000</span><span class="p">:</span>
                <span class="n">dic</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">counts</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>   
                <span class="k">return</span> <span class="n">dic</span>
    <span class="k">return</span> <span class="s1">&#39;Not enough words&#39;</span>
</pre></div>


<p>Note that we want to exclude all punctuation and repeats of words with upper and lowercase letters. Therefore we make sure each word isn't inside the punctuation list, and use .lower(). </p>
<h2>3.2 Finding the Rhyme Density</h2>
<h3>3.2.1 Identifying Word Sounds</h3>
<p>Ok, that was simple enough! Now for the tricky part: rhyme sounds. How do we determine whether two english words rhyme? Well, that's hard. The english language is nutoriously difficult with many odd spellings and unintuitive sounds. So... we're not going to worry about it. We'll just use some third party software called eSpeak. Their tool will allow us to convert words into their phonetic spelling, so we can directly compare the sound of words. </p>
<p>You can go on over to their website install and the software. It's a command line tool so make sure to add the eSpeak directory to your system path to allow command line calls. Once that's done, we can convert text into its phonetic form with the following call:</p>
<div class="highlight"><pre><span></span><span class="n">espeak</span> <span class="o">-</span><span class="n">q</span> <span class="o">--</span><span class="n">ipa</span> <span class="o">-</span><span class="n">v</span> <span class="n">en</span><span class="o">-</span><span class="n">us</span> <span class="o">&lt;</span><span class="n">text</span><span class="o">&gt;</span>
</pre></div>


<p>Since we are interested in rhyming sounds (and are going to be lenient about half-rhymes) we're really only interested in the vowel sounds. So the first thing we want to do is take our lyrics, and convert it into a list of ordered vowel sounds, stripped of their consanants. An exhasustive list of all the possible english vowel sounds is shown below.</p>
<div class="highlight"><pre><span></span><span class="n">vowels_sounds</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;aɪ&#39;</span><span class="p">,</span><span class="s1">&#39;aʊ&#39;</span><span class="p">,</span><span class="s1">&#39;eɪ&#39;</span><span class="p">,</span><span class="s1">&#39;i&#39;</span><span class="p">,</span><span class="s1">&#39;oʊ&#39;</span><span class="p">,</span><span class="s1">&#39;oː&#39;</span><span class="p">,</span><span class="s1">&#39;uː&#39;</span><span class="p">,</span><span class="s1">&#39;æ&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ɑː&#39;</span><span class="p">,</span><span class="s1">&#39;ɔ&#39;</span><span class="p">,</span><span class="s1">&#39;ɔɪ&#39;</span><span class="p">,</span><span class="s1">&#39;ɔː&#39;</span><span class="p">,</span><span class="s1">&#39;ɛ&#39;</span><span class="p">,</span><span class="s1">&#39;ɛ&#39;</span><span class="p">,</span><span class="s1">&#39;ɜː&#39;</span><span class="p">,</span><span class="s1">&#39;ɪ&#39;</span><span class="p">,</span><span class="s1">&#39;ʊ&#39;</span><span class="p">,</span><span class="s1">&#39;ʌ&#39;</span><span class="p">]</span>
</pre></div>


<p>Notice that some are two characters long, and sometimes the first character of a two-character vowel sound also exists as its own seperate vowel sound. Therefore we can split this into two lists: possible first characters and possible second characters</p>
<div class="highlight"><pre><span></span><span class="n">first</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;i&#39;</span><span class="p">,</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;ɐ&#39;</span><span class="p">,</span><span class="s1">&#39;æ&#39;</span><span class="p">,</span><span class="s1">&#39;ɑ&#39;</span><span class="p">,</span><span class="s1">&#39;ɒ&#39;</span><span class="p">,</span>
         <span class="s1">&#39;ɔ&#39;</span><span class="p">,</span><span class="s1">&#39;ɛ&#39;</span><span class="p">,</span><span class="s1">&#39;ɜ&#39;</span><span class="p">,</span><span class="s1">&#39;ɪ&#39;</span><span class="p">,</span><span class="s1">&#39;ʊ&#39;</span><span class="p">,</span><span class="s1">&#39;ʌ&#39;</span><span class="p">,</span><span class="s1">&#39;ɚ&#39;</span><span class="p">,</span> <span class="s1">&#39;ə&#39;</span><span class="p">]</span>
<span class="n">second</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ɪ&#39;</span><span class="p">,</span><span class="s1">&#39;ʊ&#39;</span><span class="p">,</span><span class="s1">&#39;ː&#39;</span><span class="p">]</span>
</pre></div>


<p>We now want a function to go through our lyrics and output a vowel list. You can allow python to access the command line with the check_output() function from the in-built subprocess module. My function is as below</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_phonetic_vowels</span><span class="p">(</span><span class="n">text_file</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Strip the text of constanants and output vowell list&#39;&#39;&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="n">text_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">text_file</span><span class="p">:</span>
        <span class="n">original_text</span><span class="o">=</span><span class="n">text_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>

    <span class="n">n</span> <span class="o">=</span> <span class="mi">30000</span> <span class="c1">#we&#39;re limited to about 30,000 characters so have to do it in chunks</span>
    <span class="n">original_text</span> <span class="o">=</span> <span class="p">[</span><span class="n">original_text</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">original_text</span><span class="p">),</span> <span class="n">n</span><span class="p">)]</span>
    <span class="n">phonetic_text</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">original_text</span><span class="p">:</span>
        <span class="n">phonetic_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">check_output</span><span class="p">([</span><span class="s2">&quot;espeak&quot;</span><span class="p">,</span> <span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;--ipa&quot;</span><span class="p">,</span> <span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;en-us&quot;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">])</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
        <span class="n">phonetic_vowels</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">phonetic_text</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
            <span class="n">letter</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">first</span><span class="p">:</span>
                <span class="n">vowel</span> <span class="o">=</span> <span class="n">letter</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">letter</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">second</span><span class="p">:</span>
                        <span class="n">vowel</span> <span class="o">+=</span> <span class="n">letter</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="n">phonetic_vowels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vowel</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">phonetic_vowels</span>
</pre></div>


<h3>2.3.2 Sorting out Rhymes</h3>
<p>Ok. So for every rapper we now have a huge long list of every vowel sound they use in their first 20,000 words. How can we analyse this in order to say something useful about how densely they are rhyming? Some things to note might be</p>
<ol>
<li><strong>Repeated words aren't really rhymes.</strong> Well, we've tried pretty hard to get rid of repeated rhymes but in the format I have so far, we've now lost all information about what original words were linked to each vowel sound. This is a bit of a flaw really. If 2 Chainz just shouts 'Money Bitch, Money Bitch!' we won't really have any way of knowing that that's not actually a neat little double rhyme. Sorry... improvements to suggest?</li>
<li><strong>Multi rhymes sound better than single rhymes.</strong> 'Multis' as they are knows, and words or phrases that stretch over several syllables, maintaining an identical rhyming pattern. Whatever system we design it should reward lyrics that include long stretches of perfect rhymes</li>
<li><strong>When do you cut-off?</strong> Clearly two words seperated by 20 lines that happen to rhyme do so by mere chance. How far back should we allow two vowel sounds to be linked?</li>
</ol>
<p>The process that I have designed goes like this: </p>
<ol>
<li>In-take a new vowel sound. </li>
<li>Search back through the 30 previous vowel sounds to see if there is a match. If there is no match, move to the next vowel sound.</li>
<li>If there is a match, look at the next vowel sound in the list and find out if the combination of these <strong>two</strong> vowel sounds appear anywhere in the 30 previous vowel sounds. If they do, add the next vowel and repeat. If they don't simply add the vowel(s) without this extension and continue. </li>
<li>When no more vowels are left, return a list of lists, containing all the vowel and vowel sequences that have been determined to rhyme.</li>
</ol>
<p>Note that part of this proces involves searchinng for a sub-list within a list. There's no in-built python function for this as far as I could tell, so I had to write my own. It is shown below.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_it_in</span><span class="p">(</span><span class="n">sub_list</span><span class="p">,</span> <span class="n">main_list</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">main_list</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">main_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">sub_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">main_list</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">sub_list</span><span class="p">)]</span> <span class="o">==</span> <span class="n">sub_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>


<p>To put the above algorithm into python was a bit of a headache for me. The function I finally came up with is shown below</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_rhymes</span><span class="p">(</span><span class="n">phonetic_vowels</span><span class="p">,</span> <span class="n">trail</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>

    <span class="n">phonetic_vowels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">rhymes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">total_vowels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">phonetic_vowels</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">total_vowels</span><span class="p">:</span>

        <span class="n">vowel</span> <span class="o">=</span> <span class="n">phonetic_vowels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">vowel_trail</span> <span class="o">=</span> <span class="n">phonetic_vowels</span><span class="p">[:</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="n">trail</span><span class="p">:]</span>
        <span class="n">vowels</span> <span class="o">=</span> <span class="p">[</span><span class="n">vowel</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">vowel</span> <span class="ow">in</span> <span class="n">vowel_trail</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">total_vowels</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">vowel</span> <span class="o">=</span> <span class="n">phonetic_vowels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">vowels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vowel</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">is_it_in</span><span class="p">(</span><span class="n">vowels</span><span class="p">,</span> <span class="n">vowel_trail</span><span class="p">):</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">total_vowels</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">vowel</span> <span class="o">=</span> <span class="n">phonetic_vowels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">vowels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vowel</span><span class="p">)</span>
            <span class="n">rhymes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vowels</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">rhymes</span>
</pre></div>


<p>Finally, I want some function to designate points based on this output list of lists of rhyme sounds. The function that I decided on allocates more points to longer multis quadratically by </p>
<p>$$ f(\text{length}) = \text{length} \times (1 + \frac{\text{length} - 1}{10} \, ) $$ </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">points</span><span class="p">(</span><span class="n">rhymes</span><span class="p">):</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">rhyme</span> <span class="ow">in</span> <span class="n">rhymes</span><span class="p">:</span>
        <span class="n">multi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rhyme</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="n">multi</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">multi</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">score</span>
</pre></div>


        
    </div>
        <!-- /Content --> 

        <!-- Footer -->
        <div class="footer gradient-2">
            <div class="container footer-container ">
                <div class="row">
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Sitemap</div>
                        <ul class="list-unstyled">
                            <li><a href="/archives.html">Archives</a></li>
                            <li><a href="/tags.html">Tags</a></li>
                            <li><a href="/authors.html">Authors</a></li>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom Feed</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    </div> 
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                        <p class="pull-right text-right">
                            <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                            <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                            <small>&copy; blogname 2015</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Footer -->
    </body>
</html>